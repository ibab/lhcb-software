!$Id: release.notes,v 1.367 2010-08-27 13:48:59 jpalac Exp $
!============================================================================
! Package     : DaVinciKernel
! Responsible : DV Maintainer
!============================================================================

! 2015-08-12 - Gerhard Raven
 - remove #include of obsolete Gaudi headers

!===================== DaVinciKernel v12r2 2015-07-21 =======================

! 2015-06-11 - Vanya Belyaev
 - DVCommonBase: 
     remove "root-in-tes" prefix from input locations

!===================== DaVinciKernel v12r1 2015-04-21 =======================

! 2015-04-02 - Vanya Belyaev
 - add simple test for CPU performance fo two combiner strategies.

! 2015-04-01 - Vanya Belyaev
 - change PVSentry to deal with IDVAlgorithm insted of DaVinciAlgorithm 

!========================= DaVinciKernel v12r0 2014-10-30 =========================

! 2014-10-20 - Chris Jones
 - Downgrade an Error message to Warning for when a PV refit fails.

! 2014-10-14 - Chris Jones
 - Make the LoKi vertex fitter and propertime fitter the defaults.

!========================= DaVinciKernel v11r8 2014-09-30 =========================

! 2014-09-26 - Chris Jones
 - Completely remove depreciated DVAlgorithm base class.

! 2014-09-24 - Chris Jones
 - Remove C++11 features from Kernel/ParticleFilters.h, to fix problems with
   ROOT5 based builds.

! 2014-09-04 - Chris Jones
 - Switch from boost::assign to c++11 initialiser lists for static maps in
   DVCommonBase.icpp.
 - Make an entry in DefaultDVToolTypes.h for ParticleReFitter.

! 2014-08-11 - Chris Jones
 - Move DaVinciP2VVAngles.{h,cpp} to Phys/DaVinciAngleCalculators.

! 2014-08-08 - Chris Jones
 - Import DecodeSimpleDecayString from DaVinciTools

! 2014-08-06 - Chris Jones
 - Create a new component library within this package, that contains 'core'
   components. Import DaVinciInit from DaVinciTools.

!========================= DaVinciKernel v11r7 2014-04-02 =========================

! 2014-04-01 - Chris Jones
 - Make LoKi::PVReFitter the default PV refitting tool.

!========================= DaVinciKernel v11r6 2014-02-20 =========================

! 2014-02-20 - Chris Jones
 - Fix PVRelator string in DefaultDVToolTypes.h to remove warning with
   new plugin service (Gaudi v25r0).

! 2014-01-31 - Chris Jones
 - Split initializeLocations() into seperate initializeInputLocations() and
   initializeOutputLocations().

! 2014-01-30 - Vanya Belyaev
 - Add update handler for property "Inputs"

! 2014-01-30 - Chris Jones
 - Add a check to DVCommonBase to test for duplication in the Input particle
   locations. If duplicates are found, a warning is printed and the
   duplication is removed. ( Note - Using some c++11 syntax ;) )

!========================= DaVinciKernel v11r5p1 2013-10-29 =========================

! 2013-10-14 - Chris Jones
 - Downgrade 'Non-existing location ...' messages to debug level.

!========================= DaVinciKernel v11r5 2013-10-07 =========================

! 2013-10-06 - Vanya Belyaev
 - Add new file PVSEntry : 
   Actually move the internal CombineParticle sentry into public domain.

!========================= DaVinciKernel v11r4p1 2013-08-01 =========================

! 2013-06-14 - Chris Jones
 - Add various missing virtual destructors in Kernel/ParticlePredicates.h, 
   to silence gcc 4.8 warnings.

!========================= DaVinciKernel v11r4 2013-04-05 =========================

! 2013-03-25 - Chris Jones
 - Fix gcc 4.7 compilation error.

! 2013-02-25 - Chris Jones
 - Minor clean up + optimisations

!========================= DaVinciKernel v11r3 2013-02-20 =========================

! 2013-01-05 - Chris Jones
 - Fix a bug where IgnoreP2PVFromInputLocations in DVCommonBase was not 
   respected. Fixes https://savannah.cern.ch/bugs/?99656
 - Disable the preloading of P2PV relations, as this is no longer needed with 
   the new logic that loads on demand the relations based on the Particle 
   location in the TES.

!========================= DaVinciKernel v11r2 2012-11-30 =========================

! 2012-11-29 - Marco Clemencic
 - Added CMake configuration file.

! 2012-11-17 - Chris Jones
 - Extend the related PV finding logic in DVCommonBase to try and predict
   the relations table location from the Particle container TES location.
   Also, attempt to load with and without respecting the RootInTES setting.

! 2012-11-16 - Chris Jones
 - Add a compiler warning when the depreciated DVAlgorithm.h head is included.
   Make the runtime warning message more noticeable...

!========================= DaVinciKernel v11r1 2012-07-26 =========================

! 2012-07-23 - Chris Jones
 - Use new 'getIfExists' method, instead of seperate 'exists' and 'get' calls.

!========================= DaVinciKernel v11r0 2012-07-09 =========================

! 2012-07-02 - Chris Jones
 - Remove usage of the (depreciated) OnOfflineTool

! 2012-07-01 - Chris Jones
 - Add a depreciation warning to DVAlgorithm::initialize()

! 2012-06-30 - Chris Jones
 - Make the default versions of the follow tools public in the DV common 
   base class :-
    LoKi::DistanceCalculator, LoKi::TrgDistanceCalculator, AdaptivePVReFitter,
    LoKi::FastVertexFitter, OfflineVertexFitter, LoKi::VertexFitter

! 2012-06-29 - Chris Jones
 - Make the default OnOffline Tool in the DaVinci base classes public
 - Make the default distance calculators public tools

!========================= DaVinciKernel v10r6 2012-06-28 =========================

! 2012-06-27 - Chris Jones
 - Fix icc11 compilation

! 2012-06-26 - Chris Jones
 - Reduce a bit the memory footprint of the base classes by making the 
   default tool maps static data, instead of each instance having its
   own copy...
 - Remove unused data member (default PV refitter).

! 2012-06-22 - Chris Jones
 - Add new base class based on the old DVAlgorithm, with the same 'DaVinci'
   functionaility, but with varying degress of support of histogramming and
   ntupling :-
   + DaVinciAlgorithm      : No histogramming or tupling
   + DaVinciHistoAlgorithm : Histogramming only
   + DaVinciTupleAlgorithm : Histogramming and tupling
   DVAlgorithm is kept (using DaVinciTupleAlgorithm) for backwards 
   compatibility
 - The method getDVAlgorithm has been removed, as it is not compatible with
   the above changes. getIDVAlgorithm should be used instead.

!======================= DaVinciKernel v10r5 2012-03-01 =====================

! 2012-02-24 - Chris Jones
 - Remove the long depreciated option InputLocations in DVAlgorithm
 - Make i_bestVertex private

!======================= DaVinciKernel v10r4 2012-02-03 =====================

! 2012-01-18 - Vanya Belyaev
 - Move Gaudi::HashIDs into DaVinciTypes 

!======================== DaVinciKernel v10r3 2011-11-10 ====================

! 2011-09-19 - Chris Jones
 - Various minor improvements and tidy updates to DVAlgorithm, found during 
   the hunt for the 2011 reprocessing stripping seg. fault bug.

!======================== DaVinciKernel v10r2 2011-06-16 ====================

! 2011-05-22 - Vanya Belyaev
 - DVAlgorithm
    move _saveInTES from private to protected section 
 - Increase to v10r1

!======================== DaVinciKernel v10r0p1 2011-04-21 ==================

! 2011-04-18 - Juan Palacios
 - DaVinciFun
  - DaVinci::Utils::findDecayTree
   . Bug fix. Too many secondary vertices were being copied to local store.
 - Increase to v10r0p1.

!======================== DaVinciKernel v10r0 2011-02-20 ====================

! 2011-02-11 - Juan Palacios
 - DVAlgorithm
  . No longer expand InputLocations (Inputs) according to context. Trunks
    ('Phys', Hlt', 'Hlt2') must be set via Inputs property.
  . Defauly output location "Phys"/<alg name>/"Particles". Set output location
    via "Output" property. This must include ending, e.g. "/Particles"

!======================== DaVinciKernel v9r2 2011-02-20 =====================

! 2011-02-11 - Juan Palacios
 - Add property Output. Allows the user to set the output location
   of the DVAlgorithm, overwriting the one that gets set automatically. This
   is really for use with the Seleciton toolkit.
 - Make DVAlgorithm::loadEventInput virtual.
 - Add property Inputs, mirroring deprecated InputLocations.
 - Increase to v9r2.

! 2011-02-11 - Chris Jones
 - Fix various icc warnings/remarks

!======================== DaVinciKernel v9r1 2011-01-28 =====================

! 2011-01-24 - Juan Palacios
 - Remove IPhysDesktop.
 - Increase to v9r1.

!======================== DaVinciKernel v9r0 2011-01-18 =====================

! 2011-01-14 - Juan Palacios
 - DVAlgorithm
  . Inline i_bestVertex(particle).
  . Clean-up.

! 2011-01-13 - Juan Palacios
 - DVAlgorithm: 
  . Add ForceP2PVBuild property, calculates and stores Particle->PV relations
    for selected particles and decay trees if this hasn't been done before.
    Only active if WriteP2PV = true.
  . Add cached access to default IPVReFitter tool.
  . Specialist virtual method for TES saving is now _saveInTES, called by 
    DVAlgorithm::saveInTES.
  . Add "no questions asked" methods markParticle(particle*) and 
    markParticle(PARTICLES&). Particles must be on the heap, TES particles 
    tolerated. Takes over ownership unless in TES.
  . Fix input particles counter.
  . Opimisations in calculateRelatedPV for single-PV events.

! 2011-01-13 - Vanya Belyaev

 - add LHCb::RecVertexHolder into dictionary 

! 2011-01-12 - Juan Palacios
 - DVAlgorithm: fix input particles counter.

! 2011-01-12 - Juan Palacios
 - DVAlgorithm
  . Use relations always when UseP2PVRelations = true.
  . Save only relations available at the end of execute(), i.e. do not
    force calculation of relations that weren't used for anything.
 - DVAlgorithm: Separate input particles from marked particles. Marked 
   particles available via i_markedParticles() method.
 - Remove non-const DVAlgorithm::i_particles() method.
 - Add DVAlgorithm::unRelatePV(const LHCb::Particle) method.
 - Use GaudiUtils::HashMap<Particle*, VertexBase*> internally for Particle->
   PV relations. Greatly simplifies a lot of code.

! 2011-01-11 Juan Palacios
 - DVAlgorithm
  . Bug fix: move TES check out of particle saving loops.
  . Add and rename some particle saving methods. All methods now have single
    and multi-particle versions.

! 2011-01-10 - Juan Palacios
 - DVAlgorithm
  . Check that full particle tree is in TES after saving. If it isn't, return
    StatusCode::FAILURE, since this shouldn't happen and could mean a 
    memory leak.
 - Kernel/ParticlePredicates
  . Simple LHCb::Particle unary predicates. The interface class should be moved
    elsewhere.
 - DaVinciFun
  . DaVinci::Utils::decayTreeInTES checks whether a particle decay tree if
    fully in the TES. This means checking secondary vertices and decay
    products.
  . DaVinci::Utils::findDecayTree accepts a unary predicate argument that 
    decides when to stop navigating down a decay tree branch. The default is 
    FALSE, meaning the tree traversal is not truncated.
 - DVAlgorithm
  . markTrees method truncates tree saving when node is in the TES.

! 2011-01-07 - Juan Palacios
 - DVAlgorithm
  . Particles saved to TES with virtual private methof saveInTES. This is
    done automatically when filterPassed() is true. Users should not call
    saveInTES(). They can't, because it it private, but it can be over-written
    for specialist actions since it is virtual. Twin private virtual method
    writeEmptyContainer() should write an empty Particles container of the same
    type that is written in saveInTES(). This can also be overwritten.

! 2011-01-06 - Juan Palacios
 - DVALgorithm
  . Private templated implementation of DVAlgorithm::markTrees. Public methods 
    now accepts LHCb::Particle::ConstVector and LHCb::Particle::Range.
  . More cleanups.
  . Remove some unnecessary includes.
  . AvoidEmptyInput -> ForceInput.

! 2011-01-04 - Juan Palacios
 - DVAlgorithm
  . Use new MockPhysDesktop to print useful error messages for inadvertent
    IPhysDesktop users and clean up.

! 2011-01-04 - Juan Palacios
 - DVALgorithm
  . Local class DVAlgorithmGuard takes care of clearing local particle, 
    secondary vertex, PV containers and Particle->PV relations table.
 - Kernel/DaVinciGuards.h
  . Remove guards now existing in DaVinciUtils/Guards.h

! 2011-01-04 - Juan Palacios
 - DVAlgorithm
  . Add protected method outputLocation(), returns output location of algo.
 - Kernel/DaVinciFun.h, src/Lib/DaVinciFun.h
  . Added DaVinci::Utils::findDecayTree to get all elements of a decay tree.
  . Removed DaVinci::inTES, superceded by DaVinci::Utils::inTES from
    DaVinciUtils/Functions.h
 - DVAlgorithm
  . mark(const LHCb::Particle*) renamed cloneAndMark(const LHCb::Particle*).
  . Added markTrees(const LHCb::Particle::ConstVector&). Marks all elements 
    of decay trees for saving. Algorithm takes over ownership. 
    Elements of input vector must be on the heap.

! 2011-01-03 - Juan Palacios
 - DVAlgorithm
  . New methods to replace IPhysDesktop. To save particles, use 
    DVAlgorithm::mark(const LHCb::Particle*) instead of 
    DVAlgorithm::desktop()->keep(const LHCb::Particle*). To save all
    local candidates and their PV relations use DVAlgorithm::saveParticles().
    Remove all internal calls to IPhysDesktop methods.

 - Increase to v9r0.

!======================== DaVinciKernel v8r9 2010-12-17 =====================

! 2010-08-27 - Juan Palacios
 - src/Lib/DVAlgorithm.cpp
  . Allow full InputLocations ending in "/Particles".

! 2010-11-13 - Vanya Belyaev

 - DVAlgorithm:

     remove "BlindVertexFitter" 

! 2010-11-03 - Vanya Belyaev

 - add function to evaluate 'unique-hash-ID' and to compare 'the-same' objects 

 - cmt/requirements
  . Increase to v8r9

!======================== DaVinciKernel v8r8p2 2010-08-27 ===================

! 2010-08-27 - Juan Palacios
 - src/Lib/DVAlgorithm.cpp
  . Typo in property: "IngoreP2PVFromInputLocations"!
 - cmt/requirements
  . Increase to v8r8p2.

!======================== DaVinciKernel v8r8p1 2010-07-26 ===================

! 2010-07-11 - Vanya Belyaev

 - DVAlgorithm: 

    add 'LoKiFast' and 'FastLoKi'    ( alias for Loki::FastVertexFitter)
    entries for following tools: 

      - particle combiners 
      - particle refitters 
      - vertex fitters 

 - cmt/requirements 

    version increment to v8r8p1 
    

!======================== DaVinciKernel v8r8 2010-06-24 =====================

! 2010-06-22 - Juan Palacios
 - src/Lib/DaVinciStringUtils.cpp
  . Typo.
 - dict/DaVinciKernel.*
  . Remove dicts for DaVinci::StringUtils, seem to hang compilation.

! 2010-06-21 - Juan Palacios
 - DaVinci::StringUtils
  . Add method to remove the ending of a string. Specially useful if you want
    to go from "Phys/SomeSel/Particles" to "Phys/SomeSel"

! 2010-06-18 - Juan Palacios
 - DVAlgorithm
  . Add property IgnoreP2PVFromInputLocations, default false. If set to true, 
    Particle->RecVertex relations tables from InputLocations will not be used.
    All best PVs will be calculated from scratch. Useful if you want to be in
    control, but could be CPU intensive.
  . Now set all P->PV input locations of PhysDesktop.
  . Improve doxygen.

! 2010-06-04 - Vanya Belyaev

 - Kernel/ParticleFilters.h
  
    add trivial fuctions to split the container according soem criteria:

    e.g.

   *   using namespace LoKi::Cuts ;
   *
   *   const LHCb::Particle::Range input = ...;
   *
   *   // split into negative & positive 
   *   LHCb::Particle::ConstVector negative ;
   *   LHCb::Particle::ConstVector positive ;
   *   DaVinci::filter ( input , Q < 0 , negative , positive ) ;
   *
    

! 2010-06-02 - Juan Palacios
 - Kernel/DVAlgorithm
  . Remove IFilterCriterion and IGeomDispCalculator dependency.

! 2010-06-01 - Patrick Koppenburg
 - Remove SelResult functionality
   https://savannah.cern.ch/task/?15178

! 2010-05-29 - Vanya Belyaev

 - DVAlgorithm

     1. add accessor to decay tree fitter 
     2. change default list of particle filters 

! 2010-05-27 - Juan Palacios

 - Kernel/ParticleFilters.h
  . Fix the doxygen.

! 2010-05-26 - Vanya Belyaev

 - DecayTree.h,cpp
   move the class into Phys/DaVinciTypes to allow its usage 
   in DaVinciInterfaces

 - cmt/requirements
   versioin increment to v8r8 


!======================== DaVinciKernel v8r7 2010-05-24 =====================

! 2010-05-16 - Vanya Belyaev
 - fix a typo...


! 2010-05-16 - Juan Palacios
 - Kernel/TransporterFunctions.h
  . DaVinci::Transporter -> DaVinci::Transport.

! 2010-05-15 - Vanya Belyaev

 - add the "extends1" into dictionary
 - move the implementation of transporter functions 
   into separate file 
 - remove DaVinci::filter functions with IFilterCriterion argument

! 2010-05-14 - Vanya Belyaev

 - DVAlgorithm:
     change a bit the inheritance scheme for DVAlgorithm to enable SmartIF 
     change a bit the signature of tool-accessors (add reference) 

 - new files Kernel/ParticleFilters.h, src/Lib/ParticleFilters.cpp
    new functions:   DaVinci::filter

  /** filter the particles according to some criteria
   *
   *  As criteria one can use e.g. any LoKi-functor:
   * 
   *  @code
   *
   *   #include "LoKi/ParticleCuts.h"
   *  
   *   ...
   *
   *   LHCb::Particle::Range       input = ... ;
   *   LHCb::Particle::ConstVector negative ;
   *  
   *   using namespace LoKi::Cuts ;
   *   DaVinci::filter ( input , Q < 0 , negative ) ;
   * 
   *  @endcode 
   * 
   *  Also many boost::lambda idioms can be used:
   *  
   *  @code
   *
   *   #include "boost/lambda.hpp"
   *  
   *   ...
   *
   *   LHCb::Particle::Range       input = ... ;
   *   LHCb::Particle::ConstVector negative ;
   *  
   *   using namespace boost::lambda ;
   *   DaVinci::filter ( input , bind(&LHCb::Particle::charge,_1) < 0 , negative ) ;
   * 
   *  @endcode 
   *
   *
 

! 2010-05-12 - Juan Palacios
 - DVAlgorithm inherits from IDVAlgorithm.
 - src/Lib/DVAlgorithm.cpp
  . Print some warnings only in summary at the end of the job.
  . DVAlgorithm::primaryVertices() now returns LHCb::RecVertex::Range.
 - cmt/requirements
  . Increase version to v8r7

!======================== DaVinciKernel v8r6p1 2010-04-09 ===================

! 2010-04-07 - Juan Palacios
 - src/Lib/DVAlgorithm.cpp
  . Fix problem with PreloadTools=False.
 - cmt/requirements
  . Increase version to v8r6p1.

!======================== DaVinciKernel v8r6 2010-03-27 =====================
! 2010-03-18 - Juan Palacios
 - DVAlgorithm
  . Add protected method getStoredBestPV to fetch a best PV from the relations
    table, if one exists. 

! 2010-03-03 - Juan Palacios
 - DVAlgorithm
  . Add protected virtual method StatusCode writeEmptyContainerIfNeeded()
    to allow derived classes to chose which type of container to store for
    "empty" events.

! 2010-03-01 - Juan Palacios
 - Kernel/DVAlgorithm.h
  . Add template<class T> bool container_exist(const std::string&) function.
    Temporary fix that allows to check for existence of T::Container or
    T::Range.
 - cmt/requirements
  . Increase version to v8r6.

!======================== DaVinciKernel v8r5 2010-01-26 =====================

! 2010-02-18 - Juan Palacios
 - DVAlgorithm: remove all refetences to IMassVertexFit.
 - increase version to v8r4

!======================== DaVinciKernel v8r4 2010-01-20 =====================
! 2010-01-13 - Gerhard Raven
 - src/Lib/DVAlgorithm.cpp
  . Lazy evalution of anything PV related.
  WARNING: this change needs to go together with a change in Phys/DaVinciTools
  to avoid breaking P2PV relations under certain circumstances
  . Increase version to v8r4

! 2010-01-12 - Juan PALACIOS
 - src/Lib/DVAlgorithm.cpp
  . Bug fix: Do not load PVs when InputPrimaryVertices = "None"
 - cmt/requirements
  . Increase version to v8r3p1

!======================== DaVinciKernel v8r3 2009-11-13 =====================
! 2009-11-10 - Juan Palacios
 - src/Lib/DVAlgorithm.cpp
  . Set IPhysDesktop's outputLocation manually.
 - Kernel/DaVinciStringUtils.h, src/Lib/DaVinciStringUtils.cpp
  . Add DaVinci::::StringUtils::expandLocation(string loc, string prefix).
 - DVAlgorithm
  . Takes handling of PVs over from PhysDesktop.

! 2009-11-05 - Juan PALACIOS
 - src/Lib/DVAlgorithm.cpp
  . Bug-fix: IPhysDesktop's setUsingP2PV was being called too early.
    Have to think of a way to fix this for good.
 - Add Kernel/DaVinciP2VVAngles.h and src/Lib/DaVinciP2VVangles.cpp
  . Namespace DaVinci::P2VVAngles with P2VV angle calculating functions.
 - Kernel/DaVinciFun.h,  src/Lib/DaVinciFun.cpp
  . DaVinci::P2VVAngles moved to Kernel/DaVinciP2VVAngles.h and 
    src/Lib/DaVinciP2VVangles.cpp

! 2009-10-30 - Juan PALACIOS
 - Move Kernel/StringUtils.h to Kernel/DaVinciStringUtils.h and put 
   implementation in src/Lib/DaVinciStringUtils.cpp
 - DValgorithm
  . Add method onOffline() to get IOnOfflineTool pointer.
  . Use DaVinci::StringUtils::expandLocation function to add context paths
    to input locations before passing them to the PhysDesktop.
  . Add IRelatedPVFinder* member variable, and make relatedPVFinder() method
    access it directly, by-passing PhysDesktop.

! 2009-10-27 - Juan PALACIOS
 - Kernel/DVAlgorithm.h
  . IBTaggingTool* is now private.
  . Add protected method returning list of input TES locations corresponding
    to property InputLocations.
 - cmt/requirements
  . Increase version to v8r3.

!======================== DaVinciKernel v8r2 2009-10-16 =====================
! 2009-09-14 - Juan PALACIOS
 - DVAlgorithm
  . Add properties UseP2PVRelations and WriteP2PVRelations.
  . getRelatedPV now uses P->PV relations according to whether there is PV
    re-fitting, UseP2PVRelations is true, or the event has a single PV.
 - Kernel/BestPV.h
  . Call DVAlgorithm::bestPV

!======================== DaVinciKernel v8r1 2009-09-02 =====================
! 2009-09-01 - Juan PALACIOS
 - Kernel/RelationOneToOne.h
  . Wrapper for 1D unweighted relations table. Mimicks one-to-one table.

 - src/Lib/DVAlgorithm.cpp
  . Use CleanDesktopGuard.
 - Kernel/DaVinciGuards.h
  . Add CleanDesktopGuard. Calls PhysDekstop's cleanDesktop method from 
    destructor.
  . Make all constructors explicit.
  . Add OrphanPointerContainerGuard, which only deletes pointers if they 
    are not on the TES.

! 2009-08-31 - Juan PALACIOS
 - DVAlgorithm
  . Use single, unweighted relations.
 - Add Kernel/DaVinciGuards.h with guard to delete entries in a container of
   newed pointers.

! 2009-08-19 - Vanya BELYAEV
 - Kernel/DecayTree.h
    1. moveclass DecayTreeFitter::Tree by Wouter Hulsbergen from Phys/DecayTreeFitter package
    2. rename is as LHCb::DecayTree


! 2009-08-18 - Juan PALACIOS
 - src/Lib/DVAlgorithm.cpp
  . Do not attempt to set PhysDesktop's P2PVInputLocations if locations empty.

! 2009-08-16 - Juan PALACIOS
 - Remove FilterCriterionBase class. Moved to Phys/DaVinciFilters.

! 2009-08-13 - Vanya BELYAEV

 - remove the default value of DVAlgorithm.ParticleCombiners

    now the default value (if not specified explicitly) 
    is picked up from IOnOffLineTool 
     
! 2009-08-06 - Juan PALACIOS
 - Kernel/Particle2VertexAsct.h
  . Removed. Obsolete and not used anywhere.

! 2009-08-05 - Juan PALACIOS
 - Added Kernel/BestPV.h
  . Defines functor DaVinci::BestPV. To be used in tools owned by DVAlgorithms
    at some level. Used to get the best PV for a given particle using the
    DVAlgorithm::getRelatedPV method.

! 2009-08-02 - Juan PALACIOS
 - Added src/Lib/DaVinciFun.cpp
  . Has implementations of non-template methods in DaVinci and 
    DaVInci::P2VVAngles

! 2009-08-02 - Greig Cowan
 - Arguments to all P2VV functions changed to be const references.

! 2009-08-02 - Greig Cowan
 - Added DaVinci::P2VVAngles:: namespace to DaVinciFun.h. To be used for 
   calculating helicity and transversity angles in P2VV decays like 
   Bs2JpsiPhi. These only deal with kinematics and first boost all decay
   products to the B rest frame before proceeding with the calculation.

!======================== DaVinciKernel v8r0 2009-07-28 =====================
! 2009-07-28 - Juan PALACIOS
 - Move Kernel/Particle2Vertex.h to DaVinciInterfaces/Kernel

! 2009-07-27 - Juan PALACIOS
 - Add Kernel/TransporterFunctions.h
  . Namespace DaVinci::Transporter with particle transport free functions.
    Taken from Phys/DaVinciTransporter.

! 2009-07-27 - Juan PALACIOS
 - Major change: Move all interfaces to Phys/DaVinciInterfaces
 - Increase major version number (v8r0)
 - src/Lib/DVAlgorithm.cpp
  . Move setting of P2PVInputLocations to initialize method.

! 2009-07-22 - Chris Jones
 - Move ProtoParticle classes to Phys/ProtoParticleFilter package.

! 2009-07-22 - Juan PALACIOS
 - DVAlgorithm
  . Add data member P2PVInputLocations, to mirror that of PhysDeksktop

 - src/Lib/DVAlgorithm.cpp
  . Tidy up some of the related PV finding code

! 2009-07-20 - Chris Jones
 - Update ProtoParticleSelection code to implement new Cuts based on the
   IsMuon and IsMuonLoose flags in the MuonPID information.
   IsMuonLoose requires post-MC09 data.

!======================== DaVinciKernel v7r7 2009-06-16 =====================
! 2009-06-11 - Chris Jones
 - Fix WIN32 warnings in ProtoParticleSelection.h

!======================== DaVinciKernel v7r6 2009-05-25 =====================
! 2009-05-24 - Juan PALACIOS
 - Kernel/IRelatedPVFinder.h
  . Add methods accepting LHCb::VertexBase* containers.

!======================== DaVinciKernel v7r5 2009-05-07 =====================
! 2009-04-30 - Vanya BELYAEV
 - src/Lib/DVAlgorithm.cpp
   add few mode default nicknames for various tools 

! 2009-04-25 - Patrick Spradlin
 - src/Lib/DVAlgorithm.cpp
  . Fix bug obtaining dangling references into a temporary instance of
    Particle2Vertex::LightTable.

! 2009-04-23 - Patrick Koppenburg
 - More comments in DVAlgorithms
 - Removed FilterCriteria
 - added setDecayDescriptor(std::string)

! 2009-04-22 - Patrick Koppenburg
 - More debug printout in DVAlgorithm

! 2009-04-21 - Patrick Koppenburg
 - New method setInputLocations for PhysDeskop.
   DVAlgorithm : set it.
   This allows the new recommnded syntax:
  
   MyAlg.InputLocations =  [ 'MyPreviousAlg' ]

 - ICaloParticlemaker : use ConstVector of Particles
 - Increment to v7r5

!======================== DaVinciKernel v7r4 2009-03-09 =====================
! 2009-02-27 - Juan PALACIOS
 - Added Kernel/DaVinciFun.h with useful free functions
 - src/Lib/DVAlgorithm.cpp
  . Fix problem with pointer to related vertex getting lost in the PV re-fit
    case.
  . Use Kernel/DaVinciFun.h functions
 - cmt/requirements
  . Increase version to v7r4

! 2009-02-23 - Juan PALACIOS
 - src/Lib/DVAlgorithm.cpp
  . getRelatedPV(const LHCb::Particle* part): Add protection for null particle*
    being passed as argument. Print 10 warnings if no PV found, instead of
    infinite errors.

!======================== DaVinciKernel v7r3 2009-02-18 =====================
! 2009-02-17 - Juan PALACIOS
 - src/Lib/DVAlgorithm.cpp
  . Test whether P->PV relations table is empty before returning related PV.

! 2009-02-13 - Juan PALACIOS
 - calculateRelatedPV now returns newed pointer to related PV. The pointer is
   either from the TES (in the case where no PV re-fitting is done) or stored
   in the PhysDesktop's local vectors. Thus, memory management is taken care 
   of.

! 2009-02-11 - Juan PALACIOS
 - IPhysDekstop
  . relatedVertex is now const method.
  . virtual const LHCb::RecVertex* keep( const LHCb::RecVertex* input ) = 0;
    The vertices stored with this method should only be stored to the TES if
    they are related to a particle that is being saved to the TES. I know, I 
    know, dodgy interface.
 - Kernel/DVAlgorithm.h
  . Add  const LHCb::VertexBase* getRelatedPV(const LHCb::Particle* p) const
    This gets the related PV from the relations table or calls calculateRelatedPV if it isn't there.
 - src/Lib/DVAlgorithm.cpp
  . Implementation for getRelatedPV
  . Default for "RefitPVs" property set to false.

! 2009-02-06 - Juan PALACIOS
 - DVAlgorithm
  . Add property "ReFitPVs" controlling whether PVs are re-fitted when the
    "best" PV for a particle is asked for.
  . Remove  Particle2Vertex::LightTable calculatePVRelations(const LHCb::Particle* p) const method.

! 2009-02-05 - Juan PALACIOS
 - Kernel/IPhysDesktop.h
  . Add methods to access Particle->PV relations tables.
  /// retrieve the Particle->Primary vertex relations
  virtual const Particle2Vertex::LightTable& Particle2VertexRelations() const = 0;

  /// retrieve the Particle->Primary vertex relations
  virtual Particle2Vertex::LightTable& Particle2VertexRelations() = 0;

  /// Store relations over-writing previously existing ones
  virtual void overWriteRelations(Particle2Vertex::Range::const_iterator begin,
                                  Particle2Vertex::Range::const_iterator end);

 - DVAlgorithm
  . add methods 
     particle2Vertex::LightTable calculatePVRelations(const LHCb::Particle* p) const
     void storeRelationWithOverwrite(const Particle2Vertex::LightTable& table);

     void relateWithOverwrite(const LHCb::Particle*   part, 
                              const LHCb::VertexBase* vert,
                              const double weight=1.);

! 2009-02-04 - Juan PALACIOS
 - kernel/IPhysDesktop.h
  . Add  virtual const LHCb::RecVertex* keep( const LHCb::RecVertex* input )
    to keep re-fitted PVs.
 - DVAlgorithm
  . Add ToolMap for IPVReFitters.
  . Add accessor method primaryVertexReFitter().

! 2009-02-03 - Juan PALACIOS
 - cmt/requirements
  . Increase version to v7r3
 - Kernel/IPhysDesktop.h
  . Add const accessor to IRelatedPVFinder.
      virtual const IRelatedPVFinder* relatedPVFinder() const = 0 ;
 - Kernel/DVAlgorithm.h
  . Add const accessor to IPhysDesktop's IRelatedPVFinder.
  . Add const accessor to IPhysDesktop's primary vertex container.
 - Kernel/DVAlgorithm.h, src/Lib/DVAlgorithm.cpp
  . Add method to get the best related PV for a given LHCb::Particle.

!======================== DaVinciKernel v7r2 2009-01-08 =====================
! 2008-12-11 - Marco Cattaneo
 - Fix gcc 4.3 warning in IOnOfflineTool.h

! 2008-12-09 - Patrick Koppenburg
 - Added new function Decays::escape that replaces special characters
   by something liked by root. Taken from DecayTreeTuple.

! 2008-12-05 - Vanya BELYAEV
 - DVAlgorithm:

   1) modify the method ppSvc to return the pointer to new particle 
    property service 
   2) add method "pid" which returns particleporpety by name and ID:

  
   *   const LHCb::Particle* p = ... ;
   *
   *   const LHCb::ParticleProperty* pp = pid ( p->particleID() ) ;
   *   
   *   const LHCb::ParticleProperty* pion = pid ( "pi+" ) ;
   *   


! 2008-12-04 - Vanya BELYAEV

 - 1) LHCb::Decay -> Decays::Decay
   2) use PartProp v* Kernel 
   3) remove public global typedefs for strings&ints 
      from Kernel/IDecodeSimpleDecayString.h

! 2008-11-29 - Vanya BELYAEV

 - Kernel/DVAlgorithm.h
    remove "#include <boost/lexical_cast.hpp>", 
    since it causes Reflex problems for gcc4.3 compiler 
    (Reflex complains about boost::is_enum) 
 - cmt/requirements 
   version increment to v7r2  
    
!======================== DaVinciKernel v7r1 2008-11-17 =====================
! 2008-11-17 - Tomasz Skwarnicki
 - fix problem with unwanted dependencies in ITriggerTisTos

! 2008-11-14 - Tomasz Skwarnicki
 - Kernel/ITriggerTisTos.h ITriggerSelectionTisTos.h
   Remove obsolete input parameters and methods.
   Add new functionality with hltObjectSummaries() method.

! 2008-10-31 - Juan PALACIOS
 - src/OnOffline.h
  . Add const std::string& trunkOnTES() const method

! 2008-10-27 - Juan PALACIOS
 - Kernel/IPhysDesktop.h
  . getOutputLocation() is now const, and returns a const std::string&
  . primaryVertices() in now const, and returns const RecVertex::Container*
 - Kernel/IContextTool.h
  . primaryVertices() in now const, and returns const RecVertex::Container*

! 2008-10-21 - Juan PALACIOS

 - Kernel/IPhysDesktop.h
  . Remove Particle2Vertex::Table Table() method. The state of the table is 
    not well defined until it is stored on the TES. So better to use other
    methods to access the relations.

 - Kernel/Particle2Vertex.h
  . Add typedef LightTable for light 1D relation table
    Relations::RelationWeighted<LHCb::Particle, LHCb::VertexBase, double>

 - Kernel/IRelatedPVFinder.h
  . Return Particle2Vertex::LightTable instead of Particle2Vertex::Relations
 
! 2008-10-20 - Juan PALACIOS
 - Kernel/IRelatedPVFinder.h
  . Interface methods no longer take IDistanceCalculator* as argument. 
    Implementation should now take care of getting it's own 
    IDistanceCalculator.

! 2008-10-14 - Juan PALACIOS
 - Kernel/IRelatedPVFinder.h
  . Change interface to now return Particle2Vertex::Relations instead of
    Particle2Vertex::Range, which is essentially a couple of iterators
    refering back to the former.
 - cmt/requirements
  . Increase version to v7r1

! 2008-09-30 - Juan PALACIOS
 - Kernel/IRelatedPVFinder.h
  . relatedPVs methods now return a Particle2Vertex::Range
  . IDistanceCalculator* is passed as function argument.
 - Kernel/Particle2Vertex.h
  . Add some useful typedefs to Particle2Vertex namespace.

! 2008-09-29 - Juan PALACIOS
 - Kernel/IRelatedPVFinder.h
  . Make all methods const.

! 2008-09-29 - Juan PALACIOS
 - src/Lib/DVAlgorithm.cpp
  . Adapt to changes in IOnOffline interface.

! 2008-09-29 - Juan PALACIOS
 - Kernel/IOnOfflineTool.h
  . Clean up interface. Now it only gives the names of some
    tool implementations and PV location to be used by the parent algorithm
    or tool.

! 2008-09-29 - Juan PALACIOS
 - Backwards-incompatible changes to IRelatedPVFinder. interface now contains 
   three simple methods taking a particle, some primary vertices, and an 
   empty range of weighted Particle->VertexBase relations, so be filled
   according to some "bestness" logic.

!======================== DaVinciKernel v7r0 2008-07-16 =====================
! 2008-07-11 - Vanya BELYAEV
 - Kernel/ISetInputParticles.h, src/Lib/ISetInputParticles.cpp
    new interface to allow some "tool-like" usage of CombineParticle algorithm.
    Jose Angel & Gabriel have nice use-case for it for debugging of HLT2.

 - dict/DaVinciKernelDict.h, DaVinciKernelDict.xml  
    build the dictionary for the ISelInputParticles interface and 
    the related function

! 2008-07-10 - Patrick Koppenburg
 - Make IGeomDispCalcularor obsolete in DVAlgorithm, but keep it for the time
   being.
 - Reflect this in IOnOffline and IContextTool
 - Remove IParticle2VertexAsct tool. 
 - Increment to v7r0

!======================== DaVinciKernel v6r15 2008-07-02 ====================
! 2008-07-02 - Juan PALACIOS
 - Kernel/IPVReFitter.h
  . Make all methods const.
  . Make first argument of IPVReFitter::remove a const LHCb::Particle*
 - cmt/requirements
  . Increase version to v6r15

!======================== DaVinciKernel v6r14 2008-06-03 ====================
! 2008-06-03 - Patrick Koppenburg for Tom Blake
 - New version on IP2VV interfaces adding methods for the transversity basis.

! 2008-05-29 - Marco Cattaneo
 - Fix doxygen warnings

! 2008-05-29 - Vanya BELYAEV
 - Add the file GetDecay.cpp, adds methods lost in move of Decay to LHCbKernel

!======================== DaVinciKernel v6r13 2008-05-05 ====================
! 2008-05-05 - Vanya BELYAEV
 - move class DaVinci::Decay into LHCbKernel package 
   (and rename it to LHCb::Decay) 

! 2008-04-29 - Patrick Koppenburg
 - IPhysDesktop: remove save() method
 - ProtoParticleFilterBase.cpp : reduce verbosity
 - Increment to v6r13

!======================== DaVinciKernel v6r12 2008-04-17 ====================
! 2008-04-17 - Patrick Koppenburg
 - IPhysDesktop: save methods renamed to keep. Save will be removed in the
   next release. Thanks to Vanya for suggesting this name.

! 2008-04-15 - Juan PALACIOS
 - Add public virtual method 
    StatusCode transportAndProject(const LHCb::Particle*, 
                                   const double znew,
                                    LHCb::Particle& transParticle) = 0;
   to IParticleTransporter interface.

! 2008-04-15 - Vanya BELYAEV
 - Kernel/DVAlgorithm.h
     add an accessor to  IDistanceCalculator tools:

    /// accessor to Distance Calculator tool
    inline IDistanceCalculator* distanceCalculator ( const std::string& name = "" ) const ;

- src/Lib/DVAlgorithm.cpp
    1 ) add new property: "DistanceCalculator" with mapping of nickname to the
        actual type/name for distance calculator tools.
    2 ) update the possible mapping for following proeprties:
         "VertexFitters"    
         "ParticleCombiners" 
         "ParticleReFitters"
         "MassFitters"
         "LifetimeFitters"
         "DirectionFitters"  


! 2008-04-10 - Vanya BELYAEV
 - src/Lib/Decay.cpp
    fix a stupid bug ( "==" instead of "=" )

! 2008-04-10 - Vanya BELYAEV 
 - Kernel/IPlotTool.h
   Add (implemented) template method to allow filling the plots for an
   arbitrary sequence of objects, convertible to "const LHCb::Particle*"

! 2008-04-04 - Vanya BELYAEV
 - Kernel/IDistanceCalculator.h
    Add a counterpartner for the method "projectedDistance" 
     *without* evaluation of the error in the projected-distance 
    (could be a bit more more efficient, if the error is not required):


  // ==========================================================================
  /** Calculate the projected distance 
   *
   *  \$s=\frac{\left(\vec{\mathbf{v}}\vec{\mathbf{p}}
   *     \right)}{\left|\vec{\mathbf{p}}\right|}\f$,
   *  where vector \f$\vec{\mathbf{v}}\f$ is a vector from 
   *  the primary to the secondary vertex: 
   *    \f$\vec{\mathbf{v}}=\vec{\mathbf{x}}_{d}-\vec{\mathbf{x}}_{pv}\f$,
   *
   * @param particle (input)  the pointer to the particle 
   * @param primary  (input)  the pointer to the production vertex 
   * @param dist     (output) the projected distance
   * @return status code 
   */
  virtual StatusCode projectedDistance   
  ( const LHCb::Particle*   particle , 
    const LHCb::VertexBase* primary  , 
    double&                 dist     ) const = 0 ;

! 2008-04-03 - Vanya BELYAEV 
 - Kernel/Decay.h
     - add few very simple functions, which simplify the manipulations 
       with DaVinci::Decay class and IDecodeSimpleDecayString interface
    - also add a typedef for "std::vector<DaVinci::Decay>" as "DaVinci::Decays"

! 2008-03-31 - Vanya BELYAEV
 - Kernel/Decay.h:  add few simple setters
 - modify a bit IDecodeSimpleDecayString interface to be able to get the 
   decay descriptor in a form of DaVinci::Decay
 - New class DaVinci::Decay, which is able to represent the simple 1-step decay
   new files: Kernel/Decay.h, src/Lib/Decay.cpp
   The primary goal fo thie class is to act as an argument for LoKi-loops,
   but it can also acs as some base class for CombineParticle::Decay

! 2008-03-31 - Patrick Koppenburg
 - ParticlesFilterBase : no DECLARE_TOOL_FACTORY in linker library

! 2008-03-30 - Vanya BELYAEV
 - Kernel/IPRintDecay.h, src/Lib/IPrintDecay.cpp	
    add new abstract interface for orintout of dec	ay tree   
    (essentially it is MC-free version of IPrintDeca	yTreeTool) 

! 2008-03-14 - Patrick Koppenburg
 - Less verbose initialisation of DVAlgorithm

! 2008-03-10 - Vanya BELYAEV
 - Kernel/IDistanceCalculator.h
   src/Lib/IDistanceCalculator.cpp 
     add the new abstract interface for "distance calculator" tool  

!======================== DaVinciKernel v6r11 2008-02-25 ====================
! 2008-02-23 - Vanya BELYAEV
 - Kernel/DVAlgorithm.h
   src/Lib/DVAlgorithm.cpp
  
  add new accessors to the base class DVAlgorithm:
  
  inline IMassFit* 
  massFitter       ( const std::string name = "" ) const ;

  inline IMassVertexFit* 
  massVertexFitter ( const std::string name = "" ) const ;

  inline ILifetimeFitter* 
  lifetimeFitter   ( const std::string name = "" ) const ;

  inline IDirectionFit* 
  directionFitter  ( const std::string name = "" ) const 

  The "action" is defined in terms of DVAlgorithm::getTool<TYPE>
  and therefore it is the same as for other "similar" accessors.

  New properties are introduced for the actual mappings of 
  nicknames, names and typenames for these tools: 

   [all of them of the type DVAlgorithm::ToolMap, which is 
    std::map<std::string, std::string>]
 
  +----------------------+-----------------------------------+
  |  The property        |       The default value           |
  +----------------------+-----------------------------------+
  | "MassFitters"        |      the empty map                |
  | "MassVertexFitters"  |      the empty map                |
  | "LifetimeFitters"    |   { '' : 'PropertimeFitter' }     |
  | "DirectionFitters"   |   { '' : 'DirectionFitter'  }     | 
  +----------------------+-----------------------------------+


!======================== DaVinciKernel v6r10 2008-01-21 ====================
! 2008-01-21 - Patrick Koppenburg for Rudolf Oldemann
 - New method calcProjectedFlightDistance in IGeomDispCalculator

! 2008-01-19 - Vanya BELYAEV 

 - src/Lib/DVAlgorithm.cpp

    Few minor modification for dealing with Algorithm Context Service:

    1) the property "RegisterForContexService" is set to be "true"
    2) initialize/finalize and sysExecute methods are equipped with 
       sentries/guards to register the algorithm for Algorithm ContextService
    3) there is warning message "intialize" methods if the registration 
       for context service  is disabled.

! 2008-01-16 - Patrick Koppenburg
 - DVAlgorithm: Declare all tools as protected instead of private.

! 2008-01-15 - Vanya BELYAEV 
 - Kernel/IMassFit.h
    New interface for mass-constrained fit.
    The interface inherits from IParticleReFitter
 - src/Lib/VertexFitterInterfaces.cpp
    add implementation of empty protected destructors and interafceID 
    for new abstract interface IMassFit  

! 2008-01-08 - Marco Cattaneo
 - Cleanup includes in Particle2VertexAsct.h

! 2008-01-07 - Patrick Koppenburg
 - More comments by Jeremie

! 2008-01-04 - Patrick Koppenburg
 - Add them to the dictionaries

! 2007-12-18 - Patrick Koppenburg
 - Two new interfaces IParticleTupleTool and IEventTupleTool for 
   filling generic nTuples.

!========================= DaVinciKernel v6r9 2007-12-10 ====================
! 2007-12-08 - Patrick Koppenburg
 - Do not use incident end-event to clean desktop:
   . IPhysDesktop: Don't look for Incidents
   . DVAlgorith.cpp: clean desktop at end of execute

! 2007-12-04 - Vanya BELYAEV
 - Kernel/GetDVAlgorithm.h, src/Lib/GetDVAlgorithm.cpp
    simple function to get DVAlgorithm from the context 

! 2007-12-02 - Vanya BELYAEV
 - Kernel/ICheckOverlap.h
   add couple of templated methods for the abstract interface ICheckOverlap
   to allow the various containers and container adapters to be used on the
   same basic as the standard LHCb::Particle::ConstVector

!========================= DaVinciKernel v6r8 2007-11-12 ====================
! 2007-10-10 - Tomasz Skwarnicki
 - dictionary for TisTos tools
   add new methods to their interfaces to make use in python easier 

!========================= DaVinciKernel v6r7 2007-10-05 ====================
! 2007-10-02 - Patrick Koppenburg for Vanya Belyaev
 - DVAlgorithm.cpp: small change to get correct statistics of 
   setFilterPassed(bool)

!========================= DaVinciKernel v6r6 2007-09-21 ====================
! 2007-09-23 - Patrick Koppenburg
 - Bug fix in TisTos interface.

! 2007-09-19 - Juan PALACIOS
 - src/Lib/DVAlgorithm.cpp
   . Add ParticleAdder to list of VertexFitters, ParticleCombiners, and
     ParticleReFitters.

 - Kernel/GeomDispCalculator.h
   . Correct doxygen for calcSignedFlightDistance

! 2007-09-18 - Juan PALACIOS
 - Kernel/GeomDispCalculator.h
   . Add method calcSignedFlightDistance( const LHCb::VertexBase& vertex,
                                          const LHCb::Particle& particle, 
                                          double& distance, 
                                          double& distanceError) const
   . Give reasonable names to method arguments!
   . Improve doxygen comments.

! 2007-09-18 - Patrick Koppenburg for Tom Blake
 - IP2VV(Part)AngleCalculator.h
   . Two new interfaces for tools calculating angles in e.g. B->mumuK*

! 2007-09-07 - Patrick Koppenburg
 - DVAlgorithm: 
   . use WriteSelResult Tool
   . Do not use IAlgorithm2ID
 - IAlgorithm2ID.H : removed. Dictionaries fixed accordingly.

! 2007-09-03 - Patrick Koppenburg
 - Added TisTosTobbing interfaces
 - increment to v6r6

! 2007-08-22 - Patrick Koppenburg
 - Kernel/IMassVertexFit.h
   . Changed doxygen comment

!========================= DaVinciKernel v6r5 2007-07-24 ====================
! 2007-07-24 - Juan Palacios
 - Add interface Kernel/IParticleArrayFilter.h
   . For filtering out LHCb::Particles from an array.
 - dict/DaVinciKernel.h, DaVinciKernel.xml
   . Add interface IParticleArrayFilter to dictionary.

! 2007-07-20 - Juan Palacios
 - Add interface IFilterParticles and base class FilterParticlesBase.
 - cmt/requirements
   . Increase version to v6r5

!========================= DaVinciKernel v6r4 2007-06-11 ====================
! 2007-06-11 - Marco Cattaneo
 - Put back IParticleTransporter interface (was in PhysEvent)

! 2007-06-04 - Marco Cattaneo
 - DVAlgorithm::setFilterPassed now returns void, as in Gaudi v19r4 base class

!========================= DaVinciKernel v6r3 2007-05-10 ====================
! 2007-05-10 - Marco Cattaneo
 - Fix a doxygen warning

! 2007-05-10 - Patrick Koppenburg
 - Fix untested StatusCodes

! 2007-04-26 - Chris Jones
 - Improve verbose printout of ProtoParticles in the ProtoParticleSelection

!========================= DaVinciKernel v6r2 2007-03-21 ====================
! 2007-03-21 - Patrick Koppenburg
 - Moved PhysDesktop and Particle2VertexAsct implementations to DaVinciTools.
 - Removed component library compile and link statements in requirements

! 2007-03-20 - Patrick Koppenburg
 - src/component/PhysDeskop.cpp
   Bug fix in getParticles: was exiting loop over locations if one of the 
   locations was not present.
 - increment to v6r2

!========================= DaVinciKernel v6r1 2007-03-07 ===================
! 2007-03-07 - Chris Jones
 - Update definition of "RequiresDet='CALO'" to ECAL||PRS (previously just ECAL)
 - fix windows warnings with double -> bool cast
 - Update default syntax for particle making

! 2007-03-02 - Marco Cattaneo
 - Add dictionary for all interfaces (previously in PhysDict)  and for 
   DVAlgorithm base class
 - Remove obsolete DaVinciKernel_load.cpp file
 - Remove LHCbDefinitions includes
 - Replace some includes by forward declarations in interface definitions
 - Fix some doxygen warnings

! 2007-02-24 - Patrick Koppenburg
 - Added a space in PhysDesktop warning

! 2007-02-17 - Patrick Koppenburg for Vanya Belyaev
 - Add a counter in FilterCriterionBase

! 2007-02-16 - Patrick Koppenburg
 - Add two new methods in FilterCriterionBase.h
   . isInactive() that is called before any attempt is made to apply the filter.
		 if the filter is inactive it returns always true and issues a warning once.
   . setActive(): it is mandatory to call this method in initialsie if any cut 
	   is changed from the defaults. 
 - DVAlgorithm: change "Avoiding SelResult" to info() level.
 - PhysDesktop: change "No ParticleMaker requested in job options" and 
	 "Empty list of input locations" to debug(). A warning is issued
	 only if both occur.
 - increment to v6r1 

! 2007-02-06 - P. Koppenburg
 - get context-dependent RelatedPVFinder in Desktop. Allows to get relations
   to online PV in HLT.
 - IRelatedPV.h should return VertexBase instead of a RecVertex.

!========================= DaVinciKernel v6r0 2007-01-09 ===================

! 2007-01-30 - Juan PALACIOS
  - remove ICaloElectron interface (new release moved into CaloInterfaces)

! 2007-01-09 - Florence RANJARD
 - install include files
 - fix some *.cpp files to use new FACTORY

!========================== DaVinciKernel v5r6 2007-01-08 ===================

! 2007-01-08 - Juan PALACIOS

  - (I)PhysDesktop::particles() and secondaryVertices() now 
    return by const reference.

  - Restore ICaloElectron interface for next release. To be removed for
    next version of LHCb.

! 2006-12-21 - Olivier Deschamps
  - remove ICaloElectron interface (new release moved into CaloInterfaces)

! 2006-18-12 - Juan PALACIOS for Patrick SPRADLIN

  - Add Kernel/IChangePIDTool.h
  - cmt/requirements
    . Increase version to v5r6

! 2006-12-07 - Olivier Deschamps
  - Update ICaloElectron interface

!========================== DaVinciKernel v5r5 2006-12-06 ===================

! 2006-12-05 - Juan Palacios
  - cmt/requirements
    . Increment version to v5r5

! 2006-12-03 - O. Deschamps
 - add ICaloElectron interface (implementation in DaVinciTool)

! 2006-11-20 - Chris Jones
 - Update ProtoParticleFilter classes

!========================== DaVinciKernel v5r4 2006-11-16 ===================

! 2006-11-16 - Juan PALACIOS
  - cmt/requirements
    . Increment version to v5r4

! 2006-10-25 - Olivier Deschamps
  - add Kernel/IBremAdder.h interface 

!========================== DaVinciKernel v5r3 2006-10-24 ===================

! 2006-10-24 - J. Palacios for Marco Musy

  - Kernel/IBTaggingTool.h, ISecondaryVertexTool.h, ITagger.h
    - Change interfaces to deal with RecVertex instead of Vertex 
      where appropriate.


! 2006-10-23 - P. Koppenburg
  - src/component/PhysDesktop.cpp
    . Protect against empty association to PV in case there is no PV at all.

! 2006-10-22 - Yuehong Xie
 change Veretx* into VertexBase* in ILifetimeFitter.h and IDirectionFit.h

! 2006-10-22 - P. Koppenburg
 Slitting fo the realted PV tool into two: One reader IRelatedPV that accesses
 the desktop of the parent DVAlgorithm and on writer that is only
 to be used by the PhysDesktop
 - Kernel/IRelatedPVFinder.h
   . New interface for a tool that finds related PV according to some criteria
     only method: 
        StatusCode relatedPVs(const LHCb::Particle* p,
                              Particle2Vertex::Table* )
    To be used by desktop only			      
 - Kernel/IRelatedPV.h
   . Removed PV building method. Now in IRelatedPVFinder.h
 - Kernel/IPhysDesktop.h
 - src/component/PhysDesktop.h
   . The method relatedVertex(Particle) now calls IRelatedPVFinder tool
     that changes the relation table. Cannot be const thus.
 - src/component/PhysDesktop.cpp
 - src/component/PhysDesktop.h
   . Get IRelatedPVFinder tool.
   . New option RelatedPVFinderName that allows to set the name of the
     relator tool used.
   . Call RelatedPVFinder tool to update PV table if necessary.  


! 2006-10-13 - Vanya BELYAEV
 - Kernel/DVAlgorithm.h, src/Lib/DVAlgorithm.cpp
    - add new property AvoidForcedOutput to avoid the writing of
      empty container ad the end. The default value is  "False" 
      to guarantee the backward compatibility.
      The option is more or less useless  for real phsyics analyses.
      but it it useful for e.g. MC or special studies in DaVinci
      environment.
    - add an "#accepted" counter which trivially counts all 
      switches of filter from "False" to "True". 
    - replace few "warning() << "  printout with invoke of Warning 
      functions.

! 2006-10-09 - Juan PALACIOS

  - Kernel/IPhysDesktop.h
    . remove default parameter values for arguments in save methods.

  - cmt/requirements
    . Increase version to v5r3

  - Kernel/ISecondaryVertexTool.h, ITagger.h
    . Fix non-compiling headers, spotted when attempting to make dictionary:
      Add missing LHCb namespace where required.

  - Kernel/IPhysDesktop.h
    . relatedVertex now retirns const LHCb::VertexBase*

  - src/component/PhysDesktop{.h, .cpp}
    . Adapt to interface change (see above).

!========================== DaVinciKernel v5r2 2006-10-04 ===================

! 2006-10-03 - Juan PALACIOS
  - src/component/PhysDesktop.cpp
    . Fix compilation errors with last two changes.

! 2006-10-03 - P. Koppenburg
  - src/component/PhysDesktop.cpp
    . Issue "No relations table" warning only 10 times
! 2006-10-03 - P. Koppenburg
  - src/component/PhysDesktop.cpp
    . No particles on TES is not an error. Issue 10x a warning instead.
! 2006-09-18 - P. Koppenburg
  - Kernel/IContextTool.h
    . New user-friendly interface to IOnOffline tool that should not be used
      in user code anymore. This tool has methods:
  /// Get primary vertices
  virtual LHCb::RecVertex::ConstVector primaryVertices() const = 0 ;
  /// Get geom tool
  virtual const IGeomDispCalculator* geomTool() const = 0 ;
  /// Get default vertex fitter
  virtual const IVertexFit* vertexFitter() const = 0 ;
  /// Get physDesktop if available
  virtual IPhysDesktop* desktop() const = 0 ;

  It first tries to get them from the parent DVAlgorithm and if it 
  can't interrogates the OnOffline tool. This allows more coherence
  of tools within a given DVAlgorithm and sub-tools since all is 
  defined localy by the DVAlgorithm.

! 2006-09-14 - P. Koppenburg
  Added new automatic particle-to-PV association features making use of
  Juan's new table (see 08-21)
 
  - Kernel/IRelatedPV.h
    . New tool that gets the PVs associated to a particle. Allows
      to build the association table if not there. 
      This tool actually accesses the desktop of the ancestor DVAlgorithm.
      Any use from ToolSvc or from a non-DVAlgorithm will get a Failure.

  - Kernel/FilterCriterionBase.h
  - src/Lib/FilterCriterionBase.cpp
    . Provide a pointer to IRelatedPV for all FilterCriteria

  - Kernel/IPhysDesktop.h
  - src/component/PhysDesktop.h
    . cloneTrees method needs to clone the association table too. 
      -> requires it not to be const.
    . new private method getRelations()
    . inDesktop() becomes const
    . saveTable changes signature
  
! 2006-09-12 - P. Koppenburg
  - Kernel/IPhysDesktop.h
    . Change signature of relate to accept defualt value 1 for weight 
  - src/component/ PhysDesktop.h
  - src/component/PhysDesktop.cpp
    . Bug fix: inline methods i_p2PVTable() returned a copy of the table
      and hence all attempts to modify it were fruitless. 
      Now return a pointer. Changed code accordingly.

! 2006-09-06 - Olivier Deschamps
  - src/component/PhysDesktop.cpp
    . update for DC06 Calo stuff

! 2006-08-22 - Juan PALACIOS

  - Kernel/IParticle2VertexAsct.h
    . Completely changed interface. Now returns a weight (double) relating
      a Vertex to a Particle.

  - src/component/Particle2VertexIPSAsct{.h, .cpp}
    . Completely modified to adapt to new IParticle2VertexAsct.h interface.

  - Clean up IPhysDesktop interface. Remove internal methods. Make most 
    methods const.

  - Replace references to Particle2Vertex::Weight in public interface of 
    IPhysDesktop and implementations by double for clarity.

! 2006-08-21 - Juan PALACIOS
  - src/component/PhysDesktop.cpp
    . Add implementations for methods concerning relations of LHCb::Particles
      with LHCb::VertexBases.

! 2006-08-18 - Juan PALACIOS
  - Kernel/PP2MCLocation.h
    . New namespace containing locations of relations tables between charged 
      and neutral ProtoParticles and MC. New locations are:

      LHCb::ProtoParticle2MCLocation::Charged 
        ( = "Relations/" + LHCb::ProtoParticleLocation::Charged )
      LHCb::ProtoParticle2MCLocation::Neutrals
        ( = "Relations/" + LHCb::ProtoParticleLocation::Neutrals )

! 2006-08-17 - Juan PALACIOS
  - Kernel/IPhysDesktop
    . Add public methods for relating and retrieving relations between 
      LHCb::Particles and LHCb::VertexBases.
  - src/component/PhysDesktop{.h, .cpp} 
    . Add dummy implementations for the above.
  - Added: Kernel/Particle2Vertex.h
    . Namespace containing typedefs for LHCb::Particle -> LHCb::VertexBase 
      one-directional weighted relation.

! 2006-08-16 - Vanya BELYAEV
 - src/Lib/DVAlgorithm.cpp
   fix a misprint "ParticleCombiner" ---> "ParticleCombiners" in the name of 
   the property 

! 2006-08-16 - Vanya BELYAEV
 - Kernel/DVAlgorithm.h, 
   src/Lib/DVAlgorithm.cpp

     fixes to utilize the access to basic DaVinci tools "by-name": 
   
     // default 
     IVertexFit* fitter1 = verterFitter()
     // the same 
     IVertexFit* fitter2 = verterFitter("")
     // "offline"
     IVertexFit* fitter3 = verterFitter("Offline")
     // "trigger"
     IVertexFit* fitter4 = verterFitter("Trigger")

   The mapping "nickname --> the actual type/name" is done through the 
   algorithm properties, e.g.
   
    MyAlg.VertexFitters =  { 
        "Offline" : "OfflineVertexFitter" , 
        "Trigger" : "TrgVertexFitter"     , 
        "Kalman"  : "BlindVertexFitter"   } ; 

    It is done for following tools:
      1) IVertexFit
      2) IGeomDispCalculator 
      3) IParticleFilter 
      4) IFilterCriterion 
      5) IParticleCombiner 
      6) IParticleReFitter 

    The default defined mapping is:

      ======================================================================
      |   Nickname                     |     The actual type               |
      ====================================================================== 
      |     IVertexFit: the algorithm property "VertexFitters"             |
      ----------------------------------------------------------------------
      |       "Offline"                |    OfflineVertexFitter            |
      |       "Trigger"                |    TrgVertexFitter                |
      |       "Kalman"                 |    BlindVertexFitter              |
      ======================================================================
      |     IGeomDispCalculator: the algorithm property "GeomTools"        |
      ----------------------------------------------------------------------
      |       "Offline"                |    GeomDispCalculator             |
      |       "Trigger"                |    TrgDispCalculator              |
      ======================================================================
      |     IParticleFilter: the algorithm property "ParticleFilters"      |
      ----------------------------------------------------------------------
      |       ""                       |    ParticleFilter                 |
      ======================================================================
      |     IFilterCriterion: the algoritm property "FilterCriteria"       |
      ----------------------------------------------------------------------
      |                    empty map: no default mapping                   |
      ======================================================================
      |     IParticleCombiner: the algorithm property "ParticleCombiners"  | 
      ----------------------------------------------------------------------
      |       ""                       |    OfflineVertexFitter            |
      |       "Offline"                |    OfflineVertexFitter            |
      |       "Kalman"                 |    BlindVertexFitter              |
      ======================================================================
      |     IParticleReFitter: the algorithm property "ParticleReFitters"  | 
      ----------------------------------------------------------------------
      |       ""                       |    OfflineVertexFitter            |
      |       "Offline"                |    OfflineVertexFitter            |
      |       "Kalman"                 |    BlindVertexFitter              |
      ======================================================================      
  
  The defualt values ("") for IVertexFitter and IGeomDispCalculator are set 
  through IOnOffline tool

  *IF* the mapping is not define, the accessor tries to use the nickname as a 
   "type/name" , e.g.

     // use the type:
     IVertexFitter* fit1 = vertexFitter("OfflineVertexFitter") ;
     // use the "type/name"
     IVertexFitter* fit2 = vertexFitter("OfflineVertexFitter/VxFit") ;
     // use "type/name" *AND* locate it as *PUBLIC* tool 
     IVertexFitter* fit3 = vertexFitter("OfflineVertexFitter/VxFit:PUBLIC") ;
 

  - src/Lib/PhysDesktop.cpp

       return an error for non-existing or invalid input locations 

  - cmt/requirements 
   
       version increment to v5r2 

  
!========================== DaVinciKernel v5r1 2006-07-20 ===================

! 2006-07-20 - Juan PALACIOS

  - Kernel/IPVreFitter.h
    . Change interface to deal with pointers to LHCb::VertexBase

!========================== DaVinciKernel v5r0 2006-07-20 ===================

! 2006-07-20 - Juan PALACIOS
  - Modify the following to use new RecVertex instead of PrimVertex

        Kernel/IParticle2VertexAsct.h
        Kernel/IPhotonFromMergedParams.h
        Kernel/IPhotonParams.h
        Kernel/IPhysDesktop.h
        Kernel/IGeomDispCalculator.h
        component/PhysDesktop.h
        component/PhysDesktop.cpp
        component/Particle2VertexIPSAsct.h

  - cmt/requirements
    . Increase version number to v5r0

! 2006-07-17 - Christopher Rob Jones
 - remove selection criteria from vector in cases where decoding fails

!========================== DaVinciKernel v4r2 2006-07-07 ===================

! 2006-06-19 - Juan PALACIOS
  - Add Kernel/StringUtils.h, namespace for useful string manipulations. 
    Functions to be found under DaVinci::StringUtils.

  - Expand IParticle2VertexAsct interface to deal with LHCb::PrimVertex as
    well as LHCb::Vertex. Basically doubles the number of public methods.
    Adapt Particle2VertexAsct implementation accordingly.

! 2006-06-18 - Chris Jones
 - Add base class, interface and utilty classes for new ProtoParticle filters

! 2006-06-08 - Juan PALACIOS
  - Add Kernel/IParticle2VertexAsct.h, interface to simple tool to make 
		relations table from ranges or containers of LHCb::Particles and 
    LHCb::Vertices.
  - Add src/component/Particle2VertexIPSAsct.h, .cpp: implementations.

!========================== DaVinciKernel v4r1 2006-05-29 ===================

! 2006-06-07 - Juan PALACIOS
  - Remove Kernel/IKFFitTool.h

! 2006-05-16 - P. Koppenburg
 - Kernel/IParticle2State.h
   . New tool that allows to make a state from a Particle and back
 - Kernel/state2Particle.h
   . Becomes obsolete

! 2006-05-09 - P. Koppenburg
 - src/Lib/DVAlgorithm.cpp
   . Corrected a buglet the GeomTool option now refers to the
     first geomTool while GeomTools allows to set them all.
   . Now the options are
        DVAlgorithm.GeomTools
	DVAlgorithm.VertexFitters
	DVAlgorithm.ParticleFilters
     to make it clear that one has to use the syntax
        DVAlgorithm.VertexFitters { "OfflineVertexFitter", "TrgVertexFitter" };

! 2006-05-09 - Juan PALACIOS
 - Kernel/IVertexFit.h
   . Added methods for fitting two and three particles.

! 2006-05-09 - P. Koppenburg
 - Kernel/state2Particle.h
 - Kernel/sumMomenta.h
 - Kernel/IParticleStuffer.h
   . Moved trivial methods from ParticleStuffer to dedicated functions
         StatusCode state2Particle( const LHCb::State& state, LHCb::Particle& particle )
	 Gaudi::XYZTVector sumMomenta( const LHCb::Particle::ConstVector& vP )
         Gaudi::XYZTVector sumMomenta( const SmartRefVector<LHCb::Particle>& vP )
 - Kernel/DVAlgorithm.h
   . Removed info() level printout.

! 2006-05-08 - Juan PALACIOS  
 - Kernel/IGeomDispCalculator.h: Make all calc methods const.

! 2006-04-23 - P. Koppenburg
 - src/component/PhysDesktop.cpp
   . Read PVs as LHCb::PrimVertices

! 2006-04-23 - Vanya BELYAEV
 - Kernel/IVertexFit.h
    minor bug fixes into templated "fit"-methods 

! 2006-04-11 - J.P.Palacios
   Kernel/IPhysiceDesktop.h
   . Add const qualifiers to return values and arguments of some methods.
   . Changes propagated to PhysDesktop and DVAlgorithm.


! 2006-04-10 - J.P. Palacios
 - Kernel/IPhysiceDesktop.h
   . Change createParticle and createVertex: return value is now const,
     method names changed to "save".
 - src/component/PhysDeskTop.h, .cpp
   . Adapt to IPhysiceDesktop interface change.
 - Kernel/DVAlgorithm.h
   . Add methods 
      IParticleCombiner* particleCombiner(const std::string name = "") const 
     and 
      IParticleReFitter* particleReFitter(const std::string name = "") const
   . Modify IGeomDispCalculator tool accessor and data storage to allow for
     more than one.
   . Make the following GaudiAlg methods virtual:
     StatusCode setFilterPassed (bool state);
     StatusCode sysExecute ();
     StatusCode initialize ();
     StatusCode finalize ();

! 2006-04-04 - J.P. Palacios
 - Kernel/IGeomDispCalculator.h
   . Change calcImpactPar methods to use Gaudi::SymMatrix3x3 
     instead of Gaudi::Matrix3x3.
 - Kernel/DVAlgorithm.h, src/component/PhysDesktop.cpp
   . include <boost/lexical_cast.hpp>
 - src/Lib/DVAlgorithm.cpp
   . GaudiAlg put no longer returns StatusCode. Fix accordingly.

!========================== DaVinciKernel v4r0 2006-03-28 ===================
! 2006-03-16 - P. Koppenburg
  - Kernel/DVAlgorithm.h 
  - src/Lib/DVAlgorithm.cpp
    . Move the implementation of the getTool methods from the cpp to the header.
      This avoids a linker error both on linux (run-time) and windows.
      That's pure black magic.

! 2006-03-15 - P. Koppenburg
  - Kernel/IPhysDesktop.h
    . Remove templated PrimaryVertices method

! 2006-03-15 - P. Koppenburg
  - Kernel/DVAlgorithm.h
  - src/Lib/DVAlgorithm.cpp
    . Bug fix in getTool: modify pointer to tool if NULL
    . Removed m_loadToolsWarned
    . New variable bool m_preloadTools (=true) with option PreloadTools.
      Can be set to false when the tools are not needed (i.e. not for
      physics analysis). Then they will be loaded on demand, i.e. at any
      event which will slow down the execution of the first events and may
      cause aborts due to misconfigured tools only after a long execution.
    . Declare all tool accessors as const and the tools and tool vectors
      as mutable.
    

! 2006-03-15 - J. Palacios
  IDecayFinder.h: 
    Replace LHCb::ConstParticles with new LHCb::Particle::ConstContainer
    Remove temporary typedef for LHCb::ConstParticles.
  Kernel/Particle2VertexAsct.h: Prepend LHCb:: to Particle, Vertex.


! 2006-03-14 - J. Palacios
  IDecayFinder.h: Add temporary typedef for KeyedContainer of const Particle
                  as LHCb::ConstParticles. To be removed once GOD produces this
                  automatically in Particle.h header file.
                  Change hasDecay and findDecay methods signatures to use
                  LHCb::ConstParticles.

! 2006-02-28 - P. Koppenburg
  Relations ASSOCIATORS/TOOLS removed (see Kernel/Relations package),
  affects DaVinciAssociators and DaVinciMCTools.
  - Kernel/Particle2VertexAsct.h
    . Removed

! 2006-02-16 - P. Koppenburg for Vanya Belyaev
  . Slight change of signatures for two methods

! 2006-02-16 - P. Koppenburg
  . Joined changes from DaVinci v12r16 (head)

! 2006-02-16 - P. Koppenburg
  - Kernel/INewDirectionFitter.h
    . Removed. The NewDirectionFitter should inherit from IDirectionFit.h

! 2006-02-03 - P. Koppenburg
  Joined changes to v3r10:
  - Kernel/IBTaggingTool.h
    . No inclusion of DVAlgorithm
  - Kernel/IPhysDesktop.h
  - src/component/PhysDesktop.{cpp,h}
  - src/Lib/DVAlgorithm.cpp
    . Make sure each DVAlgorithm always writes out something to TES
  - src/component/PhysDesktop.cpp
    . Ignore OutputLocation of parent algorithm if it is ""
  - src/component/PhysDesktop.cpp
    . Issue primary vertex empty container warning only if primary
      vertices are requested
  - Kernel/Particle2VertexAsct.h
    . Moved from DaVinciFilter. 

! 2005-01-20 - P. Koppenburg
  - Kernel/IPhysDesktop.h
  - src/component/PhysDesktop.*
  - Kernel/IParticleMaker.h
    . Use ConstVectors throughout.
  - Kernel/IPhysDesktop.h
  - src/component/PhysDesktop.*
    . Kill saveTrees(Vertex::Vector) method
       
! 2005-01-19 - P. Koppenburg
  - Kernel/IMassVertexFit.h
  - Kernel/IParticleCombiner.h
  - Kernel/IVertexFit.h
    . Use explicitly LHCb::Particle::ConstVector instead of the obscure 
      "Daughters" typedef
       
! 2005-01-17 - P. Koppenburg
  First move to new Physics event model (PEM) for DC06. Package compiles.
  - Modernize DVAlgorithm
    . Remove old vertex fitter interfaces
    . Link to new IVertexFit interface
    . New getTool<IXX> method allowing several tool instances to be accessed
      by same method. 
  - Use namespace LHCb.
  - Use LHCb::Particle::ConstVector instead of ParticleVector. mm Vertex.
  - Use Gaudi matrices instead of CLHEP matrices
  - Removed all old vertex fitter interfaces
  - Removed deprecated PhysDesktop methods
  - Added Particle2VertexAsct, but not yet active as Relations are missing

! 2005-01-20 - P. Koppenburg
  - Kernel/IPhysDesktop.h
  - src/component/PhysDesktop.*
  - Kernel/IParticleMaker.h
    . Use ConstVectors throughout.
  - Kernel/IPhysDesktop.h
  - src/component/PhysDesktop.*
    . Kill saveTrees(Vertex::Vector) method
       
! 2005-01-19 - P. Koppenburg
  - Kernel/IMassVertexFit.h
  - Kernel/IParticleCombiner.h
  - Kernel/IVertexFit.h
    . Use explicitly LHCb::Particle::ConstVector instead of the obscure 
      "Daughters" typedef
       
! 2005-01-17 - P. Koppenburg
  First move to new Physics event model (PEM) for DC06. Package compiles.
  - Modernize DVAlgorithm
    . Remove old vertex fitter interfaces
    . Link to new IVertexFit interface
    . New getTool<IXX> method allowing several tool instances to be accessed
      by same method. 
  - Use namespace LHCb.
  - Use LHCb::Particle::ConstVector instead of ParticleVector. mm Vertex.
  - Use Gaudi matrices instead of CLHEP matrices
  - Removed all old vertex fitter interfaces
  - Removed deprecated PhysDesktop methods
  - Added Particle2VertexAsct, but not yet active as Relations are missing

!========================== DaVinciKernel v3r10 2006-02-03 ===================
! 2006-02-02 - P. Koppenburg
  - Kernel/IBTaggingTool.h
    . No inclusion of DVAlgorithm
    
! 2006-01-31 - P. Koppenburg
  - Kernel/IPhysDesktop.h
  - src/component/PhysDesktop.{cpp,h}
  - src/Lib/DVAlgorithm.cpp
    . Make sure each DVAlgorithm always writes out something to TES
    
! 2006-01-30 - P. Koppenburg
  - src/component/PhysDesktop.cpp
    . Ignore OutputLocation of parent algorithm if it is ""
    
! 2006-01-23 - P. Koppenburg
  - src/component/PhysDesktop.cpp
    . Issue primary vertex empty container warning only if primary
      vertices are requested
    
! 2006-01-17 - P. Koppenburg
  - Kernel/Particle2VertexAsct.h
    . Moved from DaVinciFilter.
    
!========================== DaVinciKernel v3r9 2005-12-19 ===================
! 2005-12-19 - P. Koppenburg
  - Kernel/DVAlgorithm.h
  - src/Lib/DVAlgorithm.cpp
    . Bug fix: BTaggingTool should not be private
    
! 2005-12-13 - P. Koppenburg
  - Kernel/DVAlgorithm.h
  - src/Lib/DVAlgorithm.cpp
    . Added particleDescendants tool
    . Reshuflle order

! 2005-11-13 - Gabriele Balbi & Stefania Vecchi
  - Kernel/IGlobalFitter.h
	.added documentation

! 2005-11-16 - Gabriele Balbi & Stefania Vecchi
  - Kernel/IGlobalFitter.h
	.added documentation

! 2005-11-11 - P. Koppenburg for Gabriele Balbi
  - Kernel/IGlobalFitter.h 
    . Interface for Global Fitter
  - Kernel/DVAlgorithm.h
  - src/Lib/DVAlgorithm.cpp
    . New method globalFitter() thta returns a pointer to the above.
    
! 2005-10-21 - P. Koppenburg
  - Kernel/IParticleDescendants.h
    . New utility tool that returns the daughters of a Particle
!========================== DaVinciKernel v3r8 2005-10-19 ===================
! 2005-10-17 - P. Koppenburg
  - Kernel/IOnOffline.h
    . Uses context now. Thus this tool *must* be private.
      No setOnline(bool) method anymore.
  - Kernel/Lib/DVAlgorithm.cpp
  - Kernel/component/PhysDesktop.cpp
    . Use OnOffline tool privately.

!========================== DaVinciKernel v3r7 2005-09-07 ===================
! 2005-09-06 - P. Koppenburg
  - src/component/PhysDesktop.cpp
    . Do not use desktop() methods of Particle and Vertex anymore to
      prepare for the new event model. Instead the desktop stores an internal
      std::set of particles that don't need a new.

! 2005-09-02 - Yuehong Xie
  - add Kernel/IPVReFitter.h
    . a new interface for PV refitter
    . test version. to be reviewed.

!========================== DaVinciKernel v3r6 2005-08-23 ===================
! 2005-08-10 - P. Koppenburg
  - IPhysDesktop.h
    . New method that returns the primary vertex as PrimVertex.
      Usage:
      std::vector<const PrimVertex*> primaries = desktop()->primaryVertices<PrimVertex>() ;

! 2005-07-27 - Vanya BELYAEV

 - Kernel/IJetMaker.h
     update the doxygen comments for code examples: 

     // get the tool
     const IJetMaker* jetMaker = tool<IJetMaker> ( .... ) ;

     How to use the method with 2-arguments: 
     =======================================
   
     // input particles 
     IJetMaker::Inputs input = ... 
     // // (1)  
     // const Particles* particles = .... ;
     // // create the input container 
     // IJetMaker::Inputs input( particles->begin() , particles->end() ) ;
     // // (2) 
     // ParticleVector particles = .... ;
     // // create the input container 
     // IJetMaker::Inputs input( particles.begin() , particles.end() ) ;
     // // (3) 
     // LoKi::Range particles = .... ;
     // // create the input container 
     // IJetMaker::Inputs input( particles.begin() , particles.end() ) ;
   
     // placeholder for "output" jets 
     IJetMaker::Jets   jets ;
   
     // find the jets! 
     StatusCode sc = jetMaker -> makeJets ( input , jets ) ;
   
     // make  a loop over jets:
     for ( IJetMaker::Jets::const_iterator iJet = jets.begin() ; 
           jets.end() != iJet ; ++iJet ) 
       {
           // get the jet 
           Particle* jet = *iJet ;
       }
   
     How to use the templated method with 3 arguments:
     =================================================

     // get the tool
     const IJetMaker* jetMaker = tool<IJetMaker> ( .... ) ;
   
     // get input data 
     const Particles* ps = get<Particles> ( ... ) ;
    
     // output jets 
     IJetMaker::Jets  jets ;
   
     // find the jets! 
     StatusCode sc = jetMaker -> makeJets ( ps -> begin () , 
                                            ps -> end   () , jets ) ;
   
     
     // make  a loop over jets:
     for ( IJetMaker::Jets::const_iterator iJet = jets.begin() ; 
           jets.end() != iJet ; ++iJet ) 
       {
           // get the jet 
           Particle* jet = *iJet ;
       }
   
     Use togather with LoKi: 
     ======================= 

     // get input data : get all basic particles 
     Range basic = select( "basic" , HASORIGIN ) ; 
   
     // output jets 
     IJetMaker::Jets  jets ;
      
     // find the jets! 
     StatusCode sc = jetMaker -> makeJets ( basic.begin () , 
                                            basic.end   () , jets ) ;
   
     
     // make  a loop over jets:
     for ( IJetMaker::Jets::const_iterator iJet = jets.begin() ; 
           jets.end() != iJet ; ++iJet ) 
       {
           // get the jet 
           Particle* jet = *iJet ;
       }

! 2005-07-26 - Vanya BELYAEV

 - Kernel/IJetMaker.h
   serc/Lib/IJetMaker.cpp

   New abstract interface for jet-finding tools

   Usage:
   ======

   // get the tool
   const IJetMaker* jetMaker = tool<IJetMaker> ( .... ) ;
 
   IJetMaker::Jets  jets ;
   IJetMaker::Inputs input = ... 
 
   // find the jets! 
   StatusCode sc = jetMaker -> makeJets ( input , jets ) ;

   always << " Found " << jets.size() << " jets! " << endreq ;
 
   * ATTENTION:
   * ==========
   * It is a responsibility of users (e.g. the algorithm) to 
   * take care about the ownership of jets *AND* their vertices). 
   * Tool is not intended to do it! 


! 2005-07-25 - Vanya BELYAEV

 - Kernel/ICheckSelResults.h 
   src/Lib/ICheckSelResults.cpp

   new abstract interface for the tool, which is able to check 
   the "selection results". It is especuially convinient 
   to inspect the results of stripping or sto study the correlations 
   correlations between "(TDR,HLT,"Pre")-selection" and 
   "preselection" or different (pre)-selections

   Usage:
   ======
   
   // locate the tool:
   const ICheckSelResults* check = 
    tool<ICheckSelResults> ( "CheckSelResultsTool" ) ;
   
   // use it e.g in filling of N-Tuple:
   tuple -> column ( "mumu" , check -> isSelected ( "PreselBs2MuMu" ) ) ;
	 tuple -> column ( "hh"   , check -> isSelected ( "PreselB2hh"    ) ) ;
   

!========================== DaVinciKernel v3r5p1 2005-07-18 ===================
! 2005-07-11 - P. Koppenburg
  - PhysDesktop.cpp
    . Be less verbose
    
!========================== DaVinciKernel v3r5 2005-07-06 ===================
! 2005-07-06 - P. Koppenburg
  - Kernel/ITagger.h
    . Return Tagger object
    
! 2005-07-05 - P. Koppenburg
  - src/component/PhysDesktop.cpp
    . Call getPrimaryVertices() in primaryVertices() method
      in order to be able to avoid having to call getInput().
    
! 2005-07-04 - P. Koppenburg
  - Kernel/DVAlgorithm.h
  - src/Lib/DVAlgorithm.cpp
    . Added flavourTagging() method
    
! 2005-07-04 - P. Koppenburg
  - Kernel/IBTaggingTool.h
  - Kernel/ISecondaryVertexTool.h
  - Kernel/ITagger.h
    . Tagging tools added here.

! 2005-06-28 - Cristina Lazzeroni
 - Kernel/FilterCriterionBase.h, 
   src/Lib/FilterCriterionBase.cpp
   . New base class for Filter tools 
 - Kernel/IFilterCriteriaTESTool.h
   . New interface for Filter result tool
 - src/Lib/DVAlgorithm.cpp
   . Moved from src/

!========================== DaVinciKernel v3r4 2005-06-13 ===================
! 2005-06-09 - P. Koppenburg
  Merged with head revision. From now on use head revision in v14 series and
  make branches without Kernel/IParticleTransporter.h for v12 series.
   
! 2005-06-09 - P. Koppenburg
  - Kernel/IDirectionFit.h
  - Kernel/IMassVertexFit.h
  - Kernel/IParticleCombiner.h
  - Kernel/IParticleReFitter.h
  - Kernel/IVertexFit.h
    . New interfaces for vertex fitters

! 2005-06-08 - P. Koppenburg
  - Kernel/IOnOffline.h
    . New tool that resturns online or offline environment
      Knows about PV (replaces PVLocator) and what geom and vertex 
      tools to use.
  - Kernel/DVAlgorithm.h
  - src/DVAlgorithm.cpp
  - src/component/PhysDesktop.cpp
  - src/component/PhysDesktop.h
    . Use new tool
  - Kernel/IPVLocator.h
    . Removed
  - src/IAlgorithm2ID.h
    . Return size of algorithm array

! 2005-06-02 - P. Koppenburg
  - src/DVAlgorithm.{h,cpp}
    . Allow change of CheckOverlap Tool implementation

!========================== DaVinciKernel v3r3 2005-05-12 ===================
! 2005-05-11 - P. Koppenburg
  - Kernel/IParticleTransporter.h
    . Removed

! 2005-05-11 - P. Koppenburg for Vanya Belyaev
  - src/component/PhysDesktop.cpp
    . Allow to have tools as parent of physdektop

! 2005-05-09 - P. Koppenburg
  - Kernel/ICheckOverlap.h
    . Method was not declared purely virtual. Bug kindly reported by Vanya.

! 2005-05-02 - P. Koppenburg
  - Kernel/IAlgorithm2ID.h
    . New interface for a tool that returns an ID from a name and a 
      name from an ID.
  - Kernel/DVAlgorithm.h
  - src/DVAlgorithm.cpp
    . Use this tool.    
  
! 2005-04-21 - Y. Xie
  - Kernel/INewDirectionFitter.h
    . add this new interface 
    . similar to ILifetimeFitter.h, used to fit for both lifetime and mass 
 
! 2005-04-14 - P. Koppenburg
  - DaVinciTools/IParticleTransporter.h
    . removed

!========================== DaVinciKernel v3r2 2005-03-03 ===================
! 2005-02-25 - P. Koppenburg
  - src/component/PhysDesktop.cpp
    . Print only once the warning about the vertices() method.

! 2005-02-25 - P. Koppenburg
  - Kernel/IKFFitTool.h
  - Kernel/IParticleTransporter.h
    . Because of yet another bug of the new CLHEP 1.9, whenever one includes
      HepSymMatrix.h *after* *Point*.h, one does not get the method     
           HepSymMatrix sub(int min_row, int max_row);     
      which results in the run-trime error      
           relocation error: .../slc3_ia32_gcc323/lib*.so: undefined symbol: _ZN5CLHEP12HepSymMatrix3subEii
      -> Include SymMatrix at the very beginning of the file.
    
! 2005-02-24 - P. Koppenburg
  - Kernel/ICheckOverlap.h
    . New method (was missing)
         bool foundOverlap(Particle* );
    . New methods 
         StatusCode removeOverlap( ParticleVector& );
         StatusCode removeOverlap( ConstParticleVector& );
      That remove from a ParticleVector	the particles that have overlap
      in their decendents.
    
! 2005-02-21 - P. Koppenburg
  - Kernel/ICheckOverlap.h
    . Take const arguments.
  - Kernel/DVAlgorithm.h, src/DVAlgorithm.cpp
    . Provide new method:
         ICheckOverlap* checkOverlap()  
      
!========================== DaVinciKernel v3r1 2005-02-15 ===================
! 2005-02-09 - P. Koppenburg
  - Kernel/IKFFitTool.h
  - Kernel/IPhotonParams.h
  - Kernel/IPhotonFromMergedParams.h
    . Avoid forward declarations of CLHEP 1.9 stuff. Explicitly include
      the headers to ensure backward compatibility with CLHEP 1.8

! 2005-02-09 - P. Koppenburg
  - Kernel/IPhysDesktop.h
  - src/component/PhysDesktop.h
  - src/component/PhysDesktop.cpp
    . New methods
         const VertexVector& primaryVertices();
         const VertexVector& secondaryVertices();
      The method
         const VertexVector& vertices();
      is deprecated but still exists.
  - src/DVAlgorithm.cpp
    . No printout in debug() mode, all in verbose.

! 2005-01-21 - P. Koppenburg
  - src/component/PhysDesktop.cpp
    . StatusCode sc = setProperties();
      *before* loadtools. Or any change in DVAlgorithm options 
      affecting the choice of tools would be ignored.

!========================== DaVinciKernel v3r0 2005-01-18 ===================
! 2005-01-18 - P. Koppenburg
  - src/component/PhysDesktop.cpp
    . No PV is a Warning("..."), not an error().

! 2005-01-18 - P. Koppenburg
  - DaVinciTools/IBestParticles.h
  - DaVinciTools/IGeomVertexFitter.h
  - DaVinciTools/IIDIPhotonFromMergedParams.h
  - DaVinciTools/IIDIPhotonParams.h
  - DaVinciTools/IKFFitTool.h
  - DaVinciTools/IParticleMaker.h
    . Definitively moved to Kernel.

! 2005-01-13 - P. Koppenburg
  - Kernel/IPlotTool
    . Add default argument std::string trailer = "" in fillPlots methods.
  - DaVinciTools/*.h
    . Comment out ugly warning

! 2005-01-06 - P. Koppenburg
  - src/PhysDesktop.cpp
    . Do not issue StatusCode::FAILURE when there is no PV 

! 2005-01-06 - P. Koppenburg
  - DaVinciTools/*, Kernel/*:
    . moved all interfaces to Kernel/. Please adapt your code. For some time
      every #include "DaVinciTools/..." will work but produce a 
      compilation warning.      
      
      The script used to move everything is the followig:
      
#!/bin/tcsh
#
set interfaces = `ls -1 DaVinciTools | grep -v CVS`
echo $interfaces
foreach I ( $interfaces )
  echo moving $I
  mv DaVinciTools/$I Kernel/
  echo "#ifdef linux" > DaVinciTools/$I
  echo "#warning" >> DaVinciTools/${I}
  echo "#warning Header files in DaVinciKernel/DaVinciTools/ moved to DaVinciKernel/Kernel/" >> DaVinciTools/$I
  echo "#warning Please change DaVinciTools/$I to Kernel/$I in your code" >> DaVinciTools/$I
  echo "#warning" >> DaVinciTools/$I
  echo "#endif" >> DaVinciTools/$I
  echo "#include "'"'"Kernel/${I}"'"' >> DaVinciTools/$I
  echo Moved $I
end

! 2005-01-06 - P. Koppenburg
 - Kernel/IPVLocator.h
   . Moved form DaVinciTools/ to Kernel/
   
! 2005-01-05 - P. Koppenburg
 - Kernel/
   . New directory Kernel/ from now on all interfaces go in there.
     Eventually all interfaces will be moved from DaVinciTools/ to Kernel/
 - Kernel/IPlotTool.h
   . New interface for tools making plots with particles.
 - Kernel/IBestParticles.h, IKFFitTool.h
   . Move these interfaces only used by VertexFit
   
! 2005-01-03 - P. Koppenburg
 - src/component/PhysDesktop.h
   . Get vertices from PVLocator tool. This will do what you want in normal
     usage, but allows to easily switch to the HLT PV using the ResetPVLocation
     algorithm (in DaVinciTools).
   
! 2004-12-17 - P. Koppenburg
 - DaVinciTools/IPhysDesktop.h
   . Correct comments so that they are understyood by doxygen.
   
! 2004-12-16 - P. Koppenburg
 - DaVinciTools/IParticleFilter.h
   . Added filterByPID methods
     These two methods allow to get a subset of particles
     with the same PID without having to use the PIDFilterCriterion
     -> The same instance of ParticleFilter can be used for all
      Particles.
      ParticleVector myKaons, myPiPlus, myPiMinus;
      sc = particleFilter()->filterByPID(parts, myKaons,   "K+");
      sc = particleFilter()->filterByPID(parts, myPiPlus,  "pi+", false);
      sc = particleFilter()->filterByPID(parts, myPiMinus, "pi-", false);
      would return a vector of kaons (both sign) and pions.
  
! 2004-12-16 - P. Koppenburg
 - DaVinciTools/IParticleTransporter.h
   . Add const wherever necessary
   . Remove useless non-const method
 - src/component/PhysDesktop.{ccp,h}
   . A little bit of cleanup in the particle maker code
   
!========================== DaVinciKernel v2r1 2004-12-01 ===================
! 2004-12-01 - P. Koppenburg
 - DaVinciTools/IPhysDesktop.h
 - src/component/PhysDesktop.h
 - src/component/PhysDesktop.cpp
   . Added StatusCode cloneTrees( ParticleVector& ) method that allows
     to *clone* selected particles (.i.e. duplicating them in the TES).
     To be revised someday...
   
! 2004-11-11 - P. Koppenbyrg
 - DaVinciTools/DVAlgorithm.h
 - src/DVAlgorithm.cpp 
   . loadTools becomes private
   . m_toolsLoaded removed
   . New private method fillSelResult takes care of filling SelResult object
     and creates the container if needed. PreDV is not necessary anymore.
   . Adapted to get<> put<>...
   . Tools are now loaded after GaudiTupleAlg::initialize()

! 2004-11-04 - Yuehong Xie
 - DaVinciTools/IDirectionFitter.h
  . Add method fitWithDirection that returns the fitted primary vertex, 
    which is necessary for computing propertime.
 - DaVinciTools/IKFFitTool.h
  . Add interface for new kinematic fit tool KFFitTool

!========================= DaVinciKernel v2r0p1 2004-11-15 ==================
! 2004-09-27 - P. Koppenburg
 - DaVinciTools/IPVLocator.h
   . Interface to PVLocator (in DaVinciTools)

!========================== DaVinciKernel v2r0 2004-10-27 ===================
! 2004-09-21 - P. Koppenburg
 - DaVinciTools/DVAlgorithm.h
 - src/DVAlgorithm.cpp
   . Let DVAlgorithm inherit from GaudiTupleAlg (which inherits from 
     GaudiHistoAlg). This change (as well as the one below) is fully
     backward compatible with the old inheritence from GaudiAlgorithm,
     but allows more features. It just requires to recompile all DaVinci.
! 2004-09-18 - P. Koppenburg
 - DaVinciTools/DVAlgorithm.h
 - src/DVAlgorithm.cpp
   . Let DVAlgorithm inherit from GaudiHistoAlg.    
!========================== DaVinciKernel v1r1 2004-09-16 ===================
! 2004-09-08 - P. Koppenburg
 - IParticleFilter
   . Remove statistics
 - PhysDesktop.*
   . Warn only once when output location is changed
! 2004-09-06 - P. Koppenburg
 - (I)PhysDesktop.*
   . Add getOutputLocation() method
   . Add saveDesktop(ParticleVector&,VertexVector& ) method to IPhysDesktop
! 2004-09-03 - P. Koppenburg
 - (I)PhysDesktop.*
   . Remove getInput method.
! 2004-08-25 - P. Koppenburg
  Move src/* to src/component and Lib/* to src/
   
!========================== DaVinciKernel v1r0 2004-08-25 ===================
! 2004-08-25 - P. Koppenburg
 - cmt/requirements
   . Remove unnecessary stuff
   
! 2004-08-23 - P. Koppenburg
 - New package DaVinciKernel extracted from DaVinciTools,
   containing the DVAlgorithm baseclass, the PhysDesktop and
   all interfaces.
   
! 2004-08-23 - P. Koppenburg
 - Split DaVinciTools package into 
   . Phys/DaVinciKernel : DVAlgorithm, PhysDesktop and all Interfaces
   . Phys/ParticleMaker : All particle makers and the ParticleStuffer
   . Phys/DaVinciFilter : All Filter
   . Phys/VertexFit : All vertex fitters and the GeomDispCalculator.cpp
   . Phys/DaVinciTransporter : All transporters
   . Phys/DaVinciTools : Basically all high-level tools that are none
        of the abvove, f.i. DecayFinder, PreDV, CheckOverlap...    
   This split became necessary since DaVinciTools was become a huge monster
   containing unrelated stuff (what do the TrackTypeFilterCriterion and the 
   CombinedParticleMaker have in common?). Also DaVinciTools was evolving
   with all versions of DaVinci. In the short term, I hope that most 
   developments will affect DaVinciFilter, while the other packages will
   be rather stable except for bug fixes.
   
!========================== DaVinciTools v10r3 2004-08-23 ===================
! 2004-08-23 - Florence RANJARD
 - replace GaudiTools/ with GaudiAlg

!========================== DaVinciTools v10r2 2004-08-17 ===================
! 2004-08-12 - P. Koppenburg
  - src/MassDifferenceFilterCriterion.*
  & src/MassFilterCriterion.*
  & src/PIDCriterion.*
  & src/PhysDesktop.*
    . Make it a GaudiTool. Use message service shortcuts.

! 2004-08-04 - G. Raven
  - DaVinciTools/IDecodeSimpleDecayString.h
  - src/DecodeSimpleDecayString.{cpp,h}
    . Add a few 'const' were possible...

!========================== DaVinciTools v10r0 2004-07-22 ===================
! 2004-07-16 - P. Koppenburg
  - Lib/DVAlgorithm.cpp
    . Swap order of initialization and Tools loading. Old order prvented
      DVAlgorithms to use tools in their initalize method.
  - DaVinciTools/IBestParticles.h  
    . Interface for a new kind of "filter" tool that filters a ParticleVector
      and returns another ParticleVector.
      
! 2004-07-16 - P. Koppenburg
  - DaVinciTools/DVAlgorithm.h, Lib/DVAlgorithm.cpp
    . Make it inherit from GaudiAlgorithm. This allows for instance
      to use the shortcuts warning(), err(), debug() for msg << MSG::XXXX

! 2004-07-06 - P. Koppenburg
  - DaVinciTools/DVAlgorithm.h
    . New getDecayString method
    
!========================== DaVinciTools v9r6 2004-06-28 ===================
! 2004-06-22 - P. Koppenburg
  - Lib/DVAlgorithm.cpp
    . Correct location is Selresult
    
!========================= DaVinciTools v9r5 2004-06-04 ===================
! 2004-05-18 - P. Koppenburg
  - src/PhysDesktop.cpp
    . In PhysDesktop::saveTrees( int partid ) call saveTrees 
      also when there's nothing to save. Avoids having no container when
      the algorithm has been executed.
  
! 2004-05-15 - P. Koppenburg
 - Lib/DVAlgorithm.cpp
   . Some more debugging messages
   
! 2004-05-11 - P. Koppenburg
 - Lib/DVAlgorithm.cpp
   . Move all executable code from DVAlgorithm.h to DVAlgorithm.cpp.
     Make it a linker library.

! 2004-05-11 - P. Koppenburg for Claudia Pereira Nunes
 - src/LagrangeGeomVertexFitter.{cpp,h}
 - DaVinciTools/IGeomVertexFitter.h
   . New constrained vertex fitting tool. This tool has two public methods. 
     One, called fitWithGeom, makes only a geometrical  constrained fit for 
     at most 4 tracks. It doesn't make any kind of invariant mass vertex fit, 
     like the LagrangeMassVertexFitter tool does, it just constrain the
     particles to come from the same point. The other method, called 
     fitWithGeomAndSubMass, makes a geometrical constrained fit and an 
     invariant mass constrained fit of any daughter which is a resonance 
     (with width < 10 MeV).  This method only works if there is a daughter 
     resonance and it works for at most 4 tracks also. 
   
! 2004-05-11 - P. Koppenburg
 - DaVinciTools/DVAlgorithm.h
   . Add statistics for selected events. It can be switched off with
     PrintSelResult = false ;
!========================== DaVinciTools v9r3p1 2004-04-29 ==================
! 2004-04-29 - P. Koppenburg for Gerhard Raven
 - src/PhysDesktop.cpp
   . Issue Warning in InmposeOutputLocation only when this is changed
     form it's default value. Avoids a non-necessary warning from LoKi.

!========================== DaVinciTools v9r0 2004-03-11 ==================
! 2004-02-11 - P. Koppenburg for Hugo Ruiz
    - src/PhysDesktop.cpp, PreDV.*
   . Removed Outputlocation. New mandatory DVAlgorithm PreDV. 

!========================== DaVinciTools v8r4 2004-01-29 ==================
! 2004-01-14 - Gloria CORTI
 - DaVinciTools/IGeomDispCalCulator.h
   src/GeomDispCalculator.{h,cpp}
   . propagate change from DaVinci v8r3 that was built on a branch  

!========================== DaVinciTools v8r3 2003-12-12 ==================
! 2003-12-12 - Gloria CORTI for Miriam GANDELMAN
 Built on a branch v8r2b
 - DaVinciTools/IGeomDispCalCulator.h
   src/GeomDispCalculator.{h,cpp}
   . new interface method introduced to provide the error for each of
     the component of the IP vector. The method requires a Particle and
     a Vertex as input and returns 4 variables in the following order:
     the IP, the IP error, the full IP vector and the error on the IP
     vector.

!========================== DaVinciTools v8r2 2003-08-05 ==================
! 2003-08-05  - Gloria CORTI
 - DaVinciTools/DVAlgorithm.h
   src/V0MakerAlg.cpp
   . make ParticleStuffer a private tool in order to set its property
     < Transporter > without affecting other algorithms
 - src/CombinedParticleMaker.h & cpp
   . introduce new properties to select the type of tracks to be kept
     for analysis: < UseLongTracks > , < UseUpstreamTracks > ,
     < UseVTTTracks > ( each one can be switched on/off independenly )
 
!========================== DaVinciTools v8r1p2 2003-06-26 ==================
! 2003-06-26 - Gloria CORTI
 - DaVinciTools/DVAlgorithm.h
   . introduce new method releaseTools() to be called by derived algorithms
     at finalization to release the tools (valgrind possible memory leak)
   . rename MsgStream from log to msg

!========================== DaVinciTools v8r1p1 2003-06-18 ==================
! 2003-06-18 - Gloria CORTI
 - src/PhysDesktop.cpp
   . replace name of MsgStream log with msg and set all messages in
     getInput() in DEBUG mode
   . release partilce maker tool in finalize

! 2003-06-06 - Gloria CORTI
 - src/PhysDesktop.cpp
   . fix debugging bug that was checking size of particles container instead
     of that of vertices to print message when vertex container is empty

! 2003-05-05 - Gerhard Raven
 - DaVinciTools/ILifetimeFitter.h
 - src/LifetimeFitter.{cpp,h}
   . add code to compute, given a particle and its production vertex,
     the corresponding particle lifetime

! 2003-03-05 - Olivier Dormond
 - DaVinciTools/IDecayFinder.h:
   . Bumped major version.
   . Added to variant of hasDecay and findDecay which uses the default
     location.
   . Added a 'descendants' method to flatten a decay tree into a list.
   . Added a 'members' method to retrieve specified members of a decay.
   . Added a 'revert' method which 'dissassemble' the compiled decay.

! 2003-01-22 - Ivan BELYAEV
 - DaVinciTools/IPhotonParams.h   new abstract interface for the 
                                  (re)evaluation of photons parameters 
                                  at photon production vertex 
!=========================== DaVinciTools v6r0 2002-10-30 ===================
! 2002-10-21 - Gloria Corti
 - Change PhysDesktop to load all vertices in InputLocations and not
   only those related to particles. This allows to have vertices as
   head of trees and to load them back. (J.H.Lopes).

! 2002-09-11 - Gloria Corti
 - Changes in PhysDesktop to fix bug noted by Sandra of copying initial
   particle when daughters of a new particle.

!=========================== DaVinciTools v5r0 2002-07-29 ===================
! 2002-07-18 - Gloria Corti
 - Use PhysEvent v6r0
 - Put header files of tools and Particle&Vertex,  accessor method to
   ParticlePropertySvc in DVAlgorithm base class
 - Remove obsolete AxParticleMaker (Zebra DST)
 - Introduce ChargedParticleMaker (OO-DST) that make the choice based
   on combined PID

! >>>>>>>>>>>>>>>>>>>>>>>>>> DaVinciTools v4r0 <<<<<<<<<<<<<<<<<<<<<<<<<

! 2002-05-17 - Gloria Corti
  - Initial printout for input locations in PhysDesktop
  - DVAlgorithm: remove cpp and do inline implementation. Introduce method
    to load an instance of all tools loadTools() to be called at initialization
    Remove dummy implementation of initialize,execute and finalize
  - Similar format for messages in finalize of tools

! 2002-05-15 - Gloria Corti
  - PhysDesktop: implementation of IListner to clean up at end of events (GC)
  - FillParticleAlgorithm: adapt to new ParticleID and move check of
    AxPartCandidate before creating a Particle

! 2002-05-10 - Gloria Corti
  - New tool category of tool IParticleMaker to which PhysDesktop 
    delegates creations of Particles from different type of objects:
    one implementation AxParticleMaker making Particles from
    AxPartCandidates (Helder Lopes)
  - PhysDesktop: make use of IParticleMaker (Helder Lopes)
  - New DVAlgorithm base class for selection algorithms (Claudia Nunes)
  - IMassVertexFitter: modify names of method to generic names (GC)
  - LagrangeVertexFitter: shortcut methods (Joao de Mello)

! 2002-05-06 - Gloria Corti
  - DaVinciTools/IParticleTransporter.h: return arguments changed
    from Point+momentum+errors to Particle 
    Additional methods with Particle& and const Particle& as input arguments
    (Edgar de Oliveira)
  - DaVinciTools/IGeomDispCalculator.h: return type of method changed from
    void to StatusCode (Miriam Gandelman)
  - DaVinciTools/IVertexFitter.h: new methods (short-cuts) for 2 and 3 
    particle vertices (Sandra Amato)

! ======================================================================
! 20020402 - DaVinciTools v3r0 (G.Corti)
  - Remove obsolete tool on AxPartCandidates: interfaces, header and 
    cpp files (AddFourMom, ImpactPar)

  - src/FillParticleAlgorithm.h&cpp, algorithm to fill Particles starting
      from AxPartCandidates (Sandra Amato)

  - Introduce new OO tools working with new PhysEvent model
    The interfaces are in DaVinciTools subdirectory.
    - DaVinciTools/IGeomDispCalculator.h (interface)
      src/GeomDispCalculator.h&cpp 
          Tool to calculate varius geometrical distances between Particles & 
          Vertices (ex. impact parameter) 
      author: Miriam Gandelman

    - DaVinciTools/IParticleFilter.h (interface)
      src/ParticleFilter.h&cpp
          Tool to filter lists of particles satisfying criteria specified
          as IFilterCriterion (configured in jobOptions)
      author: Paul Colrain

    - DaVinciTools/IFilterCriterion.h, interface for tool specifiying a
          criteria to be satified by a Particle to be filtered
      src/PIDFilterCriterion.h&cpp, concrete implementation of filtering
          by ParticleID + Confidence Level
      src/KinFilterCriterion.h&cpp, concrete implementation of filtering 
          based on kinematic quantities
      author: Paul Colrain

    - DaVinciTools/IParticleTransporter.h (interface)
      src/ParticleTransporter.h&cpp
          Tool to transport a Particle and its errors at a specified z position
          Used by vertexing tools.
      author: Edgar de Oliveira

    - DaVinciTools/IVertexFitter.h, interface for generic vertex fitters
      src/UnconstVertexFitter.h&cpp, concrete implementation of a vertex fitter
          based on Fortran axksvrtx.F
      author: Sandra Amato      
    - DaVinciTools/IMassVertexFitter.h, interface for mass constrained vertex
                                       fitters
      src/LagrangeMassVertexFitter.h&cpp, concrete implementation using
          Lagrangian Multipliers
      author: Joao de Mello
                            
    - DaVinciTools/IParticleStuffer.h (interface)
      src/ParticleStuffer.h&cpp 
          Tool to fill contents of a Particle class starting from info 
          provided by its end (decay) vertex
      author: Paul Colrain

    - DaVinciTools/IPhysDesktop.h, interface for tools to provide Particles
         & Vertices for Physics analysis from various sources in TES and
         deal with saving in TES
      src/PhysDesktop.h&cpp, a concrete implementation getting info from
         various locations in TES for previous processing
      authors: Sandra Amato, Gloria Corti
      

