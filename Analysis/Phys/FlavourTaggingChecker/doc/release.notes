!-----------------------------------------------------------------------------
! Package     : Phys/FlavourTaggingChecker
! Responsible : Marc Grabalosa (mgrabalo@cern.ch)
! Purpose     : Checker package for Phys/FlavourTagging
! Twiki page  : https://twiki.cern.ch/twiki/bin/viewauth/LHCb/FlavourTagging
!-----------------------------------------------------------------------------
! 2015-11-01 - Gerhard Raven
 - replace endreq with endmsg

!=================== FlavourTaggingChecker v7r9 2015-04-22 ===================

! 2015-04-22 - Stefania Vecchi
 - Updated code to print SSproton and SSpion output for qmttest

!=================== FlavourTaggingChecker v7r8 2015-02-26 ===================

! 2015-1-22 - Jack Wimberley
 - Updated LoKi headers in BTaggingAnalysis.cpp
 - Fixed inefficient usage of _ppFromName function

!========================= FlavourTaggingChecker v7r7 2014-12-15 =========================

! 2014-12-05 - Jack Wimberley
 - Fixed tagging metrics for charm tagger in BTaggingChecker
 - Updated mode cuts for charm tagger in BTaggingAnalysis

!========================= FlavourTaggingChecker v7r6 2014-10-30 =========================

! 2014-10-07 - Jack Wimberley
 - Full support for new Charm Tagger
 - Fixed compiler warnings

! 2014-09-30 - Jack Wimberley
 - Deleted ununsed charm tagger lines
 - Added proton variables, other vars needed for new BDTs

!========================= FlavourTaggingChecker v7r5 2014-07-25 =========================

! 2014-07-23 - Stefania Vecchi
 - Fix type of integer tuple leafs 
 - Filled sMotherKEY information 

!========================= FlavourTaggingChecker v7r4 2014-06-13 =========================

! 2014-05-26 - Stefania Vecchi
 - Stored one additional variable in BTA tuple for SS-BDT taggers.
 - Updated SingleCandidate.tar with latest cuts in D*munu selection.

!========================= FlavourTaggingChecker v7r3 2014-02-20 =========================

! 2014-01-15 - Marco Cattaneo
 - Remove VL support

!========================= FlavourTaggingChecker v7r2 2013-12-18 =========================

! 2013-12-11 - Riccardo Cenci
 - Fixed include in BTaggingAnalysis.cpp

! 2013-12-10 - Riccardo Cenci
 - BTaggingAnalysis.cpp,  added extra info useful for CharmTagger running offline
 - cmake and cmt config updated.

! 2013-12-10 - Stefania Vecchi
 - BTaggingAnalysis.cpp added extra info useful for SSproton running offline.

! 2013-12-04 - Stefania Vecchi
 - BTaggingAnalysis.cpp added extra info useful for debugging:
   . IPsign and IPerr of the tagging particles wrt the Bsignal end vertex.
   . KEY of particles and MCPArticles and relatives (signal and tagging particles).

! 2013-11-30 - Stefania Vecchi
 - BTaggingChecker.cpp changes to print SS_Proton and OS_Charm tagging performance.
 - TaggingUtilsChecker.cpp changes to read the information on the origin of a particle
   from MCParticle instead of HepMC (needed by Sim08).

!========================= FlavourTaggingChecker v7r1 2013-08-01 =========================

! 2013-07-07 - Stefania Vecchi
 - A few changes to match the inclusion of nnetOSKaon and nnetSSKaon taggers
   and the drop of "category" information.

!========================= FlavourTaggingChecker v7r0 2013-06-13 =========================

! 2013-06-12 - Stefania Vecchi
 - Latest update for Reco14: store PIDNN variables, updated tagger preselection
   (like in chooseCandidateReco14 in FT)
 - New version of the FTC/root tarfile = newFTCroot.tar for offline optimization
   and calibration of taggers

! 2013-05-16 - Chris Jones
 - Fix various clang 3.2 compilation warnings

! 2013-05-14 - Chris Jones
 - Suppress info message printed each event by BTaggingChecker to debug. 
   Needed to minimise log file size in nightly tests.
 - Using Warning( ... ) for warning messages printed during the event loop.
 - A few little optimisations ..

! 2013-05-14 - Stefania Vecchi
 - Changes in the code to substitute ForcedBDecayTool (based on HepMC classes 
   no longer available in MC12) with BDecayTool.
   Affected : BOppositeMonitoring, BTaggingAnalysis, BTaggingChecker, 
              BTaggingInclusive, CheatedSelection and TaggingUtilsChecker

!========================= FlavourTaggingChecker v6r13p1 2013-05-07 =========================

! 2013-02-27 - Chris Jones
 - Fix -pedantic compilation warnings

!========================= FlavourTaggingChecker v6r13 2012-11-30 =========================

! 2012-11-28 - Stefania Vecchi
 - code cleanup in preparation for DaVinci release

! 2012-11-15 - Stefania Vecchi
 - fixed deprecated DVAlgorithm

! 2012-11-06 - Stefania Vecchi
 - fixed oddities in TaggingUtilsChecker.cpp

! 2012-10-29 - Stefania Vecchi
 - In /root
  . Fix several things related to the sweight (performance computation)
  . Modified code to account for SSK and SSpi every event 

! 2012-11-29 - Marco Clemencic
 - Added CMake configuration file.

!========================= FlavourTaggingChecker v6r12 2012-10-04 =========================

! 2012-09-07 - Marc Grabalosa
 - In /root
  . Fix sweight fill histo
  . Added SSpi cuts from calibration
  . Added ghost probability
 - ghostprobability in BTaggingAnalysis

!========================= FlavourTaggingChecker v6r11 2012-07-09 =========================

! 2012-07-01 - Marc Grabalosa
 - Add sweight training and probminVtx fixed.

!========================= FlavourTaggingChecker v6r10 2012-06-28 =========================

! 2012-06-22 - Chris Jones
 - Use getIDVAlgorithm instead of getDVAlgorithm.

! 2012-06-06 - Marc Grabalosa
 - Added ProbNN variables in BTaggingAnalysis
 - Changes to /root
  . New polynomials for SS and OS (corresponding to 1invfb)
  . Added ProbNN variable
  . Added sweights reading and reweight

!========================= FlavourTaggingChecker v6r9 2012-02-09 =========================

! 2012-01-30 - Stefania Vecchi
 - Added protection against null PV (caused by bestPV)

! 2012-01-12 - Stefania Vecchi
 - changes in root/src/Tagger*.cxx: set untagged events with pn<0 or >1
 - added tarfile with the SingleCandidateSelection*

! 2011-12-23 - Marc Grabalosa
 - changes in /root
  .fix for dQ calculation in SSk
  .pn<0 and pn>1
  .new NN for SSk
  .OS and SS optimized cuts(strip17)
  .OS calibration
 - Increase v6r9

!========================== FlavourTaggingChecker v6r8 2012-12-15 ==========

! 2011-12-8 - Stefania Vecchi
 - Bug FIXED in choosePrimary (BTaggingAnalysis.cpp) that caused wrong list of PU verices 
   Bug was included AFTER v6r7.
 - EventNumber from ODIN banks

! 2011-12-2 - Marc Grabalosa
 - EventNumber in BTagAna to double
 - SingleCandidateSelections into tarfile
 - Introduce in BTagAna variables for muon NeuroBayes NN	

! 2011-11-30 - Marc Grabalosa
 - Prepare CombProb for calibration in root/
 - Add DZeroTagger and KFrag tagger in root/

! 2011-11-10 - Marc Grabalosa
 - BTaggingAnalysis, same default PV selection criterium as in DecayTreeTuple
 - Increase to v6r7p1

!========================== FlavourTaggingChecker v6r7 2011-09-07 ==========
! 2011-09-07 - Rob Lambert
 - EOL native for SVN

! 2011-08-24 - Alex Grecu
 - replace redundant HepMC::FourVector.mag() method by .rho() for HepMC 2.06
   compatibility in Phys/FlavourTaggingChecker

! 2011-07-08 - Marc Grabalosa
 - changes in root
  . src/Tagger* Changed cuts to new optimization/calibration
  . new NeuralNets (old keep in extrann/Moriond2010)
  . Added new variables to VtxTagger
  . Added IPsign in all taggers
  . SSK opt in Ds to PhiPi from data june 2011
  . python/FlavourTaggign/Tuning.py added new cuts for opt/cal july2011
  . Consistent with FTv12r4p3
 - Increase to v6r7

!========================== FlavourTaggingChecker v6r6p3 2011-04-29 ==========
! 2011-04-08 - Juan Palacios
 - src/BTaggingAnalysis.cpp
  . Attempt to fix memory leaks.
 - Increase to v6r6p3.

!========================== FlavourTaggingChecker v6r6p2 2011-03-28 ==========

! 2011-03-21 - Marc Grabalosa
 - Changed properties names for consistency in FTC/root wrt FT.
 - Added average perf in PerformanceMonitoring.cxx
 - Added in BTaggingAnalysis the corrected TriggerTool, and some missing MC information
 - Increase to v6r6p2.

!========================== FlavourTaggingChecker v6r6p1 2011-03-10 ==========

! 2011-02-23 - Juan Palacios
 - Remove last references to LHCb::Particles.
 - Increase to v6r6p1.

!========================== FlavourTaggingChecker v6r6 2011-02-20 ============

! 2011-02-13 - Chris Jones
 - Add missing use statement in requirements file for HltEvent

! 2011-02-10 - Marc Grabalosa
 - Add some more plots in FTC/root. And few modifiactions

! 2011-02-04 - Juan Palacios
 - Add missing use of Phys/DaVinciMCKernel to requirements.

! 2011-02-04 - Marc Grabalosa
  - Removed TrackMatching form BTaggingAnalysis
  - More plots in /root. VCh plots, Omega for comb and taggers plots.
  - Modification of NN tuning (solved bug on normalization)
  - Raise to v6r6

!========================== FlavourTaggingChecker v6r5 2011-02-03 ============

! 2011-01-26 - Marc Grabalosa
  - Fixed bug in vertexch for (B id<0). New calibration constants
  - New option files MeV
  - Calibration of per event omega for OS, OS+SS combination without calibration
  - Optimized KSS with data
  - Raise to v6r5

!========================== FlavourTaggingChecker v6r4 2011-01-19 ============

! 2011-01-19 - Juan Palacios
 - Replace all calls to IPhysDesktop by new DVAlgorithm methods.
 - Increase to v6r4.
 - REQUIRES Phys/DaVinciKernel v9r0 OR HIGHER!!!

!========================== FlavourTaggingChecker v6r3 2011-01-19 ============

! 2011-01-19 - Marc Grabalosa
 - calibration of per event omega for OS and OS+SS
 - Optimized kSS with mc nu=2.5

! 2011-01-18 - Marc Grabalosa
 - patch to unitialized IP

! 2011-01-17 - Marc Grabalosa
 - Optimization strip12_v1

! 2011-01-14 - Marc Grabalosa
 - Introduccion IPsigned variable in the ntuple
 - bug fix in root/src/KOS

! 2011-01-05 - Juan Palacios
 - src/BTaggingAnalysis.cpp
  . Replace calls of obsolete desktop()->particles() by this->particles().

! 2010-12-23 - Marc Grabalosa
 - Small clean-up
 - More plots and study for vtx
 - Optimization and calibration for strip12
 - Raise to v6r3

!========================== FlavourTaggingChecker v6r2 2010-12-20 ============

! 2010-12-14 - Marc Grabalosa
 - Small clean-up
 - Debug for vtx
 - Raise to v6r2

! 2010-12-02 - Marc Grabalosa
 - Add plots for Propertime
 - Add proper time in NNvtx, change seedlikelihood
 - Change MuonTagger cuts

! 2010-12-01 - Marco Musy
 - cleanup, added control on verbosity level

! 2010-11-30 - Marco Musy
 - removed files cuts_* which are now picked directly from
   $FLAVOURTAGGINGOPTS, unless a copy is not provided in the same directory
   $FLAVOURTAGGINGCHECKER/root
   This is to avoid default duplication of definitions.
 - Added src/TaggerDZeroTool.* for studying purposes only (cheated).
 - Added plots for the SV pointing.

! 2010-11-18 - Marc Grabalosa
 -src/BTaggingAnalysis.cpp
  . added variables to study SS (deta, dphi, dQ)
 -options
  . BTaggingAnalysis input in TaggingParticles
 -in /root (bug fixed for ModTime)

! 2010-11-16 - Juan Palacios
 - src/TaggingUtilsChecker.cpp
  . "and" -> "&&" to please windows.

! 2010-11-10 - Marc Grabalosa
  . added variables to study performance wrt nPV
	. new tuning for strip10 (default)
  . added training for PID in root
  . added noclones and lcs in vtx ch

! 2010-11-04 - Marc Grabalosa
  . added IP and IPerr of BS wrt PV
  . added bestPV method (uses IRelatedPVFinder)

! 2010-10-22 - Marc Grabalosa
  . added cloneDist in BTaggingAnalysis
  . added UseModBtime in FTC/root with 2 kind of kfactor

! 2010-10-20 - Marc Grabalosa
  . changed naming convention for cuts files in /root
  . default is stripping9

! 2010-10-14 - Marc Grabalosa
 . modification of /root code, new variables in taggers, new option cuts
 - Raise to v6r1

! 2010-10-12 - Marco Musy
 . added in btagginganalysis the variable minchi2 of B hypo

! 2010-10-10 - Marco Musy
 . added the possibility to include external file into options
   in /root option file tag.opts
 . cleanup root/taggingutils.cxx

! 2010-10-09 - Marco Musy
  . added root/taggermin.C to maximise taggers effective eff
    with minuit wrt to kinematic cuts

! 2010-10-06 - Marc Grabalosa
  . added MinChi2 criterium to choose Bsig
  . added delta z position, in seed for secvtx
  . modification in /root program for analysis

!========================== FlavourTaggingChecker v6r0 2010-10-04 ============

! 2010-09-30 - Marco Musy, Marc Grabalosa
  . updated cuts from D*munu, MC2010 is kept as an option in /root

! 2010-09-29 - Marco Musy
  . modified kaon oppo cuts to adapt to latest data in /root,
  cuts are always accessible through properties.
  (p,pt,IPPU)

! 2010-09-27 - Marco Musy
  . dropped cuts on ghost likelihood and loosen chi2 cut to 5
    for all the taggers in /root
  . clean up some code in /root

! 2010-09-23 - Marc Grabalosa, Marco Musy
  . update and cleanup of BTaggingAnalysis.cpp
  . complete revision of /root program for analysis

! 2010-07-02 - Marc Grabalosa
  .Added Some comments
  .Enable BTaggingAnalysis for real data

! 2010-06-22 - Marc Grabalosa
 - BTaggingAnalysis
	 . Added Trigger$TisTos Info. Possibility to save HltLines
   . Use RecVertex::Range instead of RecVertex::Container for inputs.
   . Use SvertexOneSeedTool.cpp
   . Add fill seed info
 - TaggingUtilsChecker
   .Add calcDOCAmin
 - Raise to v6r0


! 2010-06-01 - Patrick Koppenburg
 - Removed SelResult which wasn't used anyway

!========================== FlavourTaggingChecker v5r4 2010-05-24 ============

! 2010-05-12 - Juan Palacios
 - Adapt to IDValgorithm interface.

! 2010-05-12 - Juan Palacios
 - BTaggingAnalysis
  . Adapt to DVAlgorithm::primaryVertices() signature.
 - Increase to v5r4.

!========================== FlavourTaggingChecker v5r3 2010-04-30 ============

! 2010-04-16 - Juan Palacios
 - src/CheatedSelection.cpp
  . Use Particle::Range instead of Particle::Container for inputs.
 - cmt/requirements
  . Increase version to v5r3.

! 2010-03-11 - Marco Musy
  - cleanup version of root/tag.cc
  - modified BTaggingAnalysis to store single copy of particles

!========================== FlavourTaggingChecker v5r2 2010-03-08 ============

! 2010-03-02 - Marco Musy
  - synchronize ntuple content with the output of BTaggingTool
    tiny differences O(1%) in taggers still exist, will be investigated.
  - bug fixing in ip of pileup vertices.
  - protect ntuple from overflow.
  - update of /root analysis utility
  . raise to v5r2


!========================== FlavourTaggingChecker v5r1 2010-02-22 ============

! 2010-02-11 - Marco Musy
  - fix some warning messages on slc5
  - updated DVBTaggingAnalysis.py example
  - BTaggingAnalysis now also gives the info on the refitted PV.
  - remove obsolete TaggingTuplesData.cpp,h TaggingTuplesSignal.cpp,h
  - cleanup and update of BTaggingAnalysis
  - BTaggingChecker updated with tagger info.
  - Increase version to v5r1

!========================== FlavourTaggingChecker v5r0 2010-02-02 ============

! 2010-02-02 - Marco Musy
  - drop variables of ip in entuple in src/BTaggingAnalysis.cpp
  - cleanup code
  - updated options
  - updated root/ analysis tools
  . Increase version to v5r0

! 2010-01-18 - Marco Musy
 - modified TaggingUtilsChecker to take in the asbolute value of impact parameter

! 2010-01-14 - Juan PALACIOS
 - src/BTagginganalysis.cpp
  . Use DVAlgorithm::primaryVertices() instead of IPhysDesktop::primaryVertices()
 - cmr/requirements
  . Increase version to v4r0p1

!========================== FlavourTaggingChecker v4r0 2009-12-16 ============

! 2009-12-11 - M. Musy
 - fix in the opposite B definition of BTaggingAnalysis

! 2009-12-03 - M. Musy
 - Small fixes to BTaggingAnalysis

! 2009-11-30 - M. Musy
 - changed some output levels,
 - updated examples option files
 - fixed Cheated Selection
 - restored BTaggingAnalysis
 - Increase version to v4r0

!========================== FlavourTaggingChecker v3r9p1 2009-11-17 ==========

! 2009-11-15 - Juan Palacios
 - src/TaggingTuplesData.cpp
  . Adapt to change in Event/Tagger.h

! 2009-11-12 - Juan Palacios
 - src/CheatedSelection.cpp
  . IPhysDekstop::imposeOutputSelection->IPhysDesktop::setOutputLocation.
 - cmt/requirements
  . Increase version to v3r9p1

!========================== FlavourTaggingChecker v3r9 2009-10-28 ============

! 2009-10-27 - Juan PALACIOS
 - cmt/requirements
  . Increase version to v3r9

! 2009-10-15 - M. Musy for M. Grabalosa
 - add monitor of the B opposite side statistics.

! 2009-10-15 - M. Musy
  fix in TaggingTuplesSignal replace HltSummary with HltDecReports

! 2009-10-15 - Patrick Koppenburg
 - Replace HltType by Hlt and HltThresholdSettings
 - v3r8p1

!========================== FlavourTaggingChecker v3r8 2009-10-01 ============

! 2009-08-24 - Patrick Koppenburg
 - Remove BTaggingAnalysis that doesn't compile anymore
 - The relevant bits of this very ancient piece of code should be transformed
   into a TupleTool.
 - v3r8

!========================== FlavourTaggingChecker v3r7 2009-07-15 ============

! 2009-07-05 - Marco Musy
 changes in py options for the cheated selection
 changes in BTaggingAnalysis.cpp and CheatedSelection.cpp
 rise version to v3r7

!========================== FlavourTaggingChecker v3r6 2009-06-23 ===========
! 2009-04-24 - Marco Musy
  adapt for changes in the Event Model Event/xml/Tagger.xml where
  std::vector&lt;LHCb::Particle&gt; becomes std::vector&lt;LHCb::Particle*&gt;
  still getting a crash when the Tagger is returned.

!=====================FlavourTaggingChecker v3r5 2009-05-11 ================

! 2009-04-24 - Patrick Koppenburg
 - Initialize DVAlgorithm
 - v3r5
 - @todo Options do not work anymore : FIX

!=====================FlavourTaggingChecker v3r4 2009-03-01 ================

! 2009-02-25 - Marco Musy
 - fix on hlt info

! 2009-02-23 - Marco Musy
 - adapt python scripts
 - add variables for the chi2 of the IP
 - add analysis tools in root/

!=====================FlavourTaggingChecker v3r3 2009-01-15 ================

! 2008-12-03 - Patrick Koppenburg
 - Removed DVBTagging_for_Bd2JpsiKs that is incompatible with v21r1.

!=====================FlavourTaggingChecker v3r2 2008-11-26 ================

! 2008-11-14 - Tomasz Skwarnicki
 - fix commented TisTos code in BTaggingAnalysis in case someone activates it

! 2008-11-12 - Marco Musy
  - cleanup some unused vars in BTaggingAnalysis.
  - use same secondary vertex as in FT.

! 2008-11-11 - Marco Musy
  - small fixes
  . Increase version to v3r2

! 2008-10-28 - Juan PALACIOS
 - cmt/requirements
  . Increase version to v3r1p2
 - src/BTaggingAnalysis.cpp
  . Adapt to new IPhysDesktop::primaryVertices() method

!=====================FlavourTaggingChecker v3r1p1 2008-10-06 ==============

! 2008-09-25 - Patrick Koppenburg
 - Removed obsolete and unused HltEnums
 - increment to v3r1p1

!========================== FlavourTaggingChecker v3r1 2008-08-05 ==========
! 2008-07-24 - Marco Cattaneo
 - Fixes to CheatedSelection, TaggingUtilsChecker, TaggingTublesSignal,
   BTaggingInclusive, BTaggingChecker to compile with HepMC 2 (Gaudi v20r2)
 - Add missing dependencies on Event model
 - Remove obsolete ApplicationMgr.DLLs option from *.opts files
 - Minor code cleanups

!===================== FlavourTaggingChecker v3r0 2008-07-03 ===============
! 2008-06-18 - Patrick Koppenburg
 - Depend on new package HltInterfaces

! 2008-06-10 - Marco Musy
 - revision and retuning for Brunel v31 data
 - Increment to v3r0

!===================== FlavourTaggingChecker v2r7 2008-04-24 ===============

! 2008-04-11 - Patrick Koppenburg
 - No tabs in options

! 2008-03-14 - Patrick Koppenburg for Onuora Awunor
 - TaggingTool to output tagging information from MC truth & Data in root files
 - Test option file using taggingTool
 - Macro using root file output from TaggingTool to calculate efficiencies, plots histograms
   carry out fitting and projections.
 - Increment to v2r7


!===================== FlavourTaggingChecker v2r6p1 2008-03-06 ===============

! 2008-02-14 - Patrick Koppenburg
 - DebugTool replaced by Print(MC)DecayTreeTool
 - v2r6p1

!===================== FlavourTaggingChecker v2r6 2007-11-15 =================

! 2007-11-15 - Juan PALACIOS
 - cmt/requirements
  . Increase version to v2r6

! 2007-10-30 - Marco Musy
 - Use FilterToFixOppositeBFractions by default in BTaggingAnalysis.opts


!===================== FlavourTaggingChecker v2r5 2007-10-25 =================

! 2007-10-25 - Juan PALACIOS
 - cmt/requirements
  . Increase version to v2r5

! 2007-10-23 - Marco Musy
 - other fixes to BTAnalysis and corresponding opts

! 2007-10-16 - Marco Musy
- many improvements in BTaggingAnalysis (Hlt, tistos, bkgcategory..)
- added BTaggingAnalysis.opts
- revised DVBTagging_for_B2JpsiKs.opts to produce both a DecayChainNtp and
  a specific tagging ntp for tuning


!===================== FlavourTaggingChecker v2r4 2007-07-31 =================
! 2007-06-21 - Marco Musy
- make use of Kernel/IParticleDescendants
  class instead of private method FindDaughters


!===================== FlavourTaggingChecker v2r3 2007-06-18 =================

! 2007-06-15 - Juan PALACIOS
  - cmt/requirements
    . Use Kernel/MCInterfaces package.
  - src/BTaggingAnalysis.h
  - src/BTaggingChecker.h
  - src/BTaggingInclusive.h
  - src/CheatedSelection.h
  - src/DoubleTagCorrelation.h
    . Change path for includes that moved from Kernel to MCInterfaces.

! 2007-06-07 - M. Musy, S. Poss, O. Leroy
 - Added DVBTagging_for_B2JpsiKs.opts, example options for producing
   a DecayChainNTuple with tagging information from selection Bd->JPsiKS
 - Modified units (GeV and MeV) in options files and in code.
   E.g. in CheatedSelection.opts: CheatedSelection.BMassWindow = 100.0 *MeV ;
   (before specification of MeV was missing)
 - use of IForcedBTool from Kernel
 - add particles to daughter vector in cheated selection
 - Add individual tagger information in ntuple : TaggerType, TaggerDecision,
   TaggerOmega, TaggerRef (this is the index among the N particles), TaggerUsedInSV
 - Add combined Omega in ntuple
 - added m_M block of signal particles in ntuple.
 - fix in kType variable. Removed dFlag. Added empty tamper.
 - added tool TaggingUtilsChecker grouping common actions.
 - various cleanups

!===================== FlavourTaggingChecker v2r2p1 2007-04-26 ===============
! 2007-04-26 - Marco Cattaneo
 - Get ICaloElectron.h from CaloUtils (moved from CaloInterfaces in LHCb v22r4)
 - Remove obsolete file FlavourTaggingChecker_load.cpp

!======================= FlavourTaggingChecker v2r2 2007-03-09 ===============
! 2007-03-06 - Marco Musy
  - Bug fix in BTaggingAnalysis corrected. Some unused variables dropped.
  - trigger included in ntuple, Ntuple name is set to "tagging".

! 2007-03-05 - Patrick Koppenburg
 - Do not depend on DaVinciAssociators
 - CaloElectron moved to CaloInterfaces

! 2006-03-01 - Marco Musy
  - major cleanup of BTaggingAnalysis. Small bug fix on how the PV is
    chosen. Added in some new vars in ntuple. Dropped dQ variable.
    Added xFlag to spot kaons and pions coming from excited B states.

!========================== FlavourTaggingChecker v2r1p1 2007-02-06 ==========

! 2007-02-06 - Juan PALACIOS for Marco MUSY

  - fix src/BTaggingInclusive.*
  - Increase version to v2r1p1

!========================== FlavourTaggingChecker v2r1 2006-11-16 ============

! 2006-11-10 - Marco Musy
  - fix to associators and cleanup

! 2006-11-06 - Juan PALACIOS
  - cmt/requirements
    . Increase version number to v2r1

! 2006-11-03 - Marco Musy
 - Important fixes to CheatedSelection.
 - cleanup of BTaggingAnalysis.

!========================== FlavourTaggingChecker v2r0 2006-10-24 ============

! 2006-10-24 - Juan Palacios
   - cmt/requirements
     Increase version to v2r0

! 2006-10-24 - Marco Musy
 - First DC06 translation of the code.
   Problems known:
   hacked inverse association from MCParticle -> Particle has to be
   substituted with 'official' method.
 - GenMCLink dropped in last Event Model, and substituted with the
   associatedofHEP(HepMC::GenParticle*) private method returning the
   B meson forced to decay exclusively.
 - Added a preliminary version of tuning/monitoring algorithm BTaggingAnalysis
   It produces an entuple which contains all the relevant information for
   tuning taggers. I will add a further part to deal with Neural Nets.
   The option file is DVBTaggingAnalysis.opts.

!========================== FlavourTaggingChecker v1r1 2006-05-29 ===================
! 2006-01-28 - M. Musy
  - Addition of DoubleTagCorrelation algorithm.

!========================== FlavourTaggingChecker v1r0 2005-07-06 ===================
! 2005-07-04 - P. Koppenburg
  New package containing all MC-related stuff

! 2005-07-04 - M. Musy
 - New version which exploits the new FlavourTag class definition
   in PhysEvent
 - BTagging has became BTaggingTool, while it remains for backward
   compatibility and as an example of how to use the tagging tool
 - BTaggingTool itself has been splitted in TaggerXXXTools which return
   the tagger candidates to BTaggingTool which eventually combines them
   into a final decision
 - SecondaryVertexTool has been splitted into 3 separate tools all
   inheriting from the same interface ISecondaryVertexTool which has been
   modified to return a vector of vertices instead of a single vertex
   A new SVertexABTool is created. It returns two vertices instead of
   just one, for the moment only for development purposes.

!========================== FlavourTagging v5r6 2005-05-30 ===================
! 2005-05-28 - M. Musy
 - summary.cpp has been updated
 - removed hlt part from options (no use case for the moment)
 - a WEB page is now available for tagging :

       ********************************************************
       https://uimon.cern.ch/twiki/bin/view/LHCb/FlavourTagging
       ********************************************************

   where you can find technical infos and summary of performances

! 2005-05-25 - M. Musy
 - code has been cleaned up a bit.
 - added new properties for most hard-coded numbers
 - many comments added along the way
 - each tagger can be disabled separately via property

! 2005-05-25 - P. Koppenburg
  - src/BTagging.{h,cpp}
    . Protect get<> methods with exist<>
    . Do not use TrgDecision::HLT as it is called hlt() in DaVinci v14
    . Use HltScore instead
    . Indent properly
 - src/BTaggingMonitor.cpp
    . Protect get<> methods with exist<>
!========================== FlavourTagging v5r4 2005-02-15 ===================
! 2005-03-01 - M. Musy
  - src/BTagging.{h,cpp}
    . Default is now without L0 L1 and Tampering; without Tampering, results
      may change (worsen) slightly depending upon the decay channel.
    . Code structure has been revised.
    . Bug on same-side pion tagger fixed.

! 2005-02-02 - P. Koppenburg for Marco Musy
  - src/BTagging.{h,cpp}
    . Allow the use without L0 L1 and Tampering.
    !! WARNING: results will be slightly different !!
  - src/ISecondaryVertexTool.h and src/INNetTool.h
    moved to FlavourTagging/

! 2005-02-01 - P. Koppenburg
  - FlavourTagging/IFlavourTaggingTool.h
    . Removed
  - options/CheatedSelection.opts
    . Removed DaVinciCommon and DaVinciReco already included in
      DVBTagging.opts

! 2005-01-31 - P. Koppenburg for Marco Musy
Main changes/upgrades are the following:

- tagging efficiencies and performance calculation are now moved
to BTaggingMonitor so that no truth information is accessed at any stage.

- BTagging.cpp still needs to rerun the trigger because it
makes use of the tampering info

- SecondaryVertex is now a tool, and the user can choose whether
to use the TDR definition or the revised version of it using
NeuralNets (default is old tdr)

- I implemented the new definition of tagging categories, obtained
by using a NNet tuned for each taggers separately.
these NNets are accessed via a tool (this was asked for in a meeting).
the user can still choose to stick to the old TDR categories via
BTagging.CombinationTechnique = "TDR";

- summaryof.cpp is an additional standalone program to quickly get
useful numbers out of the logfiles. it contains the instructions on
how to run it.

- DVBTagging.opts is meant as an example option file.

!========================== FlavourTagging v5r3p1 2005-01-18 ===================
! 2005-01-04 - P. Koppenburg
  - src/*.h
    . Change location of interfaces
! 2004-12-06 - P. Koppenburg
  - options/DVBTagging_example.opts
    . Correct location of L1.opts.
    . Do not run Hlt.opts it does nothing useful (yet).
    . Define BTagging TopAlg here
  - options/BTagging.opts
    . Define BTagging TopAlg in DVBTagging_example.opts
!========================== FlavourTagging v5r3 2004-10-04 ===================
! 2004-09-13 - P. Koppenburg for Thomas Ruf
  - src/BTagging.cpp
    . Do not wrap string over several lines.
      Causes compilation problems on widows.
  - Re-tag as v5r3 as it is already corrected on the release are in DaVinci
    v12r1
! 2004-09-13 - P. Koppenburg for Julien Babel
  Include trigger again
!========================== FlavourTagging v5r2 2004-08-03 ===================
! 2004-07-29 - P. Koppenburg
  - options/BTagging.opts
    . Set write to TES to true by default for backward compatibility.
! 2004-07-23 - P. Koppenburg
  - cmt/requirements
    . L1Event -> TrgEvent
    . Import AIDA
  - src/*.cpp
    . Comment out all obsolete L1 stuff
!========================== FlavourTagging v5r1 2004-07-22 ===================
! 2004-07-08 - P. Koppenburg for Marco Musy
  - options/BTagging.opts
  - options/CheatedSelection.opts
  - src/BTagging.cpp
  - src/BTagging.h
  - src/BTaggingMonitor.cpp
  - src/BTaggingMonitor.h
  - src/CheatedSelection.h
    . It includes SS pion tag and a revised treatment for electrons.

!==================== FlavourTagging v5r0 2004-05-05 ===================
! 2004-05-04 - P. Koppenburg for Marco Musy
  - src/BTagging.cpp
  - src/BTagging.h
  - src/CheatedSelection.cpp
  - src/CheatedSelection.h
  - src/FlavourTagging_load.cpp
  - src/BTaggingMonitor.cpp
  - src/BTaggingMonitor.h
  - options/DVBTagging_example.opts
  - options/BTagging.opts
  - options/CheatedSelection.opts
  . Modified or added new flavour tagging. Now official.
    Writes output to TES.

  - summary/summaryof.cpp
  . Little tool that allows to decode output

  - src/CategoryTaggingTool.cpp
  - src/CategoryTaggingTool.h
  - src/CheatedReco.cpp
  - src/CheatedReco.h
  - src/FTCombinedParticleMaker.cpp
  - src/FTCombinedParticleMaker.h
  - src/FlavourMonitorAlgorithm.cpp
  - src/FlavourMonitorAlgorithm.h
  - src/FlavourTaggingAlgorithm.cpp
  - src/FlavourTaggingAlgorithm.h
  - src/FlavourTaggingDebug.cpp
  - src/FlavourTaggingDebug.h
  - src/FlavourTaggingSummary.cpp
  - src/FlavourTaggingSummary.h
  - src/KaonSameSideTaggingTool.cpp
  - src/KaonSameSideTaggingTool.h
  - src/OrderedTaggingTool.cpp
  - src/OrderedTaggingTool.h
  - src/ParticleTaggerCriterion.cpp
  - src/ParticleTaggerCriterion.h
  - src/SingleParticleTaggingMonitor.cpp
  - src/SingleParticleTaggingMonitor.h
  - src/SingleParticleTaggingTool.cpp
  - src/SingleParticleTaggingTool.h
  - src/VertexChargeTaggingTool.cpp
  - src/VertexChargeTaggingTool.h
  - options/CombinedFlavourTagging.opts
  - options/DVCheatedSelection.opts
  - FlavourTagging/IFlavourTaggingTool.h
  . Obsolete and moved to src/attic and options/attic

!==================== FlavourTagging v4r9 2004-03-31 ===================
! 2004-03-25 - P. Koppenburg
 - CheatedReco.cpp
   . Correct location of IMCDecayFinder.h

!==================== FlavourTagging v4r8 2004-03-11 ===================
! 2004-03-11 - P. Koppenburg for Odie and Marco
 - CategoryTaggingTool.cpp (PK/Odie)
   . Don't try to access L1 or L0 when they're not there.
   . Avoid not assigning a B meson as the tagged particle
     in the case of opposing tag decisions.
 - BTagging class (Marco)
   . pion same side tagging
   . summary of tag performance at the end of run
   . writing output to TES in FlavourTag class
 - CheatedSelection (Marco)
   . Don't stop when signal B is not found in event
	(waiting for Gauss to provide flag of forced B).
 - VertexChargeTaggingTool.cpp and BTagging.cpp
   . upstream() -> isDownstream()

!==================== FlavourTagging v4r7 2004-01-28 ===================
! 2004-01-28 - Gloria CORTI for Marco MUSY
 - New version of tagging code to substitute what used for TDR.
   NOTE: Be CAREFULL to use the new (or old) tagging code after loose-cuts
         selections as this may imply that particles belonging
         to the signal are left as possible taggers, which spoils the tag!
 - src/BTagging.{h,cpp}
   . new tagging code, the output is provided as a line in the log file
     in the following sequence:
     RunNr EventNr Tag TagCategory L0 L1 NrReconPrimVTX NrVisiblePrimVTX
     ex: BTagging     INFO TAGGINGINFO  429208403 473 1 3 1 0 1 1
     Tag and TagCategory have the same meaning as in FlavourTagging.
 - options/DVBTagging_example.opts
   . example of how to use the new flavour tagging with either a real
     selection or a cheated selection
 - src/CheatedSelection.{h,cpp}
   . to perform tagging studies using a cheated selection
 - options/DVCheatedSelection.opts
   . options to execute a cheated selection as a real one

! 2004-01-14 - Gloria CORTI
 - cmt/requirements
   . use v* to allow compilation against different versions of LHCb

!==================== FlavourTagging v4r6p1 2003-08-06 =================
! 2003-07-24 - Gloria CORTI
 - src/FTCombinedParticleMaker.cpp
   . remove initialization of iterator = 0 to please gcc32
   . declare local variable to be passed as argument of method as int
     instead of double as in method (gcc32 warning)

!==================== FlavourTagging v4r6 2003-07-07 ===================
! 2003-07-04 - Olivier Dormond
 - src/FlavourTaggingAlgorithm.h, FlavourTaggingAlgorithm.cpp
   . Added a preselection cut to remove all particles compatible with a pileup
     vtx.
 - src/SingleParticleTaggingTool.h, SingleParticleTaggingTool.cpp
   . Added an option to sum the charge of the particles passing the cuts
     instead of just using the one with the highest pt.
 - option/CombinedFlavourTagging.opts
   . Activate the previous addition for the kaon same-side tag.
 - doc/release.note
   . This changelog.

! 2003-07-03 - Olivier Dormond
 - Tabification cleanup.
 - src/CategoryTaggingTool.cpp
   . Print out the number of reconstructed vertex instead of collisions.
   . Print out the category the event fall in.
   . Fixed the category key computation.
   . Fixed tag computation for e + Kss category.
 - src/CategoryTaggingTool.h
   . Fixed the computation of the error on epsillon effective.
 - src/CheatedReco.cpp
   . Correct the pid and mass of the Particle used to create the B in
     order to have the right B mass.
 - src/FlavourTaggingAlgorithm.cpp
   . Fixed the computation of the error on epsillon effective.
 - src/KaonSameSideTaggingTool.cpp
   . Updated the default cuts.
   . Fixed the vertex used for the IP cut.
 - src/VertexChargeTaggingTool.cpp
   . Fixed the cuts values.
   . Fixed the handling of the Kshort decay products.
 - doc/release.notes
   . This update.

!==================== FlavourTagging v4r5 2003-06-18 ===================
! 2003-06-16 - Olivier Dormond
 - src/CategoryTaggingTool.h, src/CategoryTaggingTool.cpp
   . Activated the vertex charge code path.
 - src/VertexChargeTaggingTool.h, src/VertexChargeTaggingTool.cpp
   . Added this new IFlavourTaggingTool subclass.
 - src/FlavourTaggingAlgorithm.cpp
   . Fixed a bug when dumping info for a vertexCharge tag.
 - src/FlavourTagging_load.cpp
   . Added the VertexChargeTaggingTool tool.
 - src/SingleParticleTaggingTool.cpp, src/KaonSameSideTaggingTool.cpp
   . Added a debug print out on entry of the active block.
 - options/CombinedFlavourTagging.opts
   . Updated the cuts including the CombinedParticleMaker tuning.
 - doc/release.notes
   . These lines.

! 2003-06-13 - Olivier Dormond
 - cmt/requirement
   . Added deps for L1 trigger and the visible collision tool.
   . Bumped version to v4r5
 - src/CategoryTaggingTool.h, src/CategoryTaggingTool.cpp
   . New tool which uses the previous one to get a set of tags it uses to
     categorize the event and make a decision about the final tag.
 - src/CheatedReco.h, src/CheatedReco.cpp
   . New algo to create particle from a cheated reconstruction.
     See doc/CheatedReco.txt for explanation about it's config.
 - src/FlavourTaggingAlgorithm.h, src/FlavourTaggingAlgorithm.cpp
   . Moved from Algorithm to DVAlgorithm and cleaned up the code a bit.
   . The Vertex passed to the tagging tool is now the primary vertex the B
     is pointing to.
 - src/FlavourTaggingSummary.h, src/FlavourTaggingSummary.cpp
   . Added L0 and L1 trigger to the output.
   . Added # of collision and # of visible collision to the output.
 - src/FlavourTagging_load.cpp
   . Added the CheatedReco algorithm and the CategoryTaggingTool tool.
 - src/KaonSameSideTaggingTool.cpp
   . Added some debugging output.
 - options/CombinedFlavourTagging.opts
   . The option file for the use of the CategoryTaggingTool which combines tags.
 - doc/CheatedReco.txt
   . Some documentation for the configuration of the CheatedReco algorithm.
 - doc/release.notes
   . This update.

!==================== FlavourTagging v4r4p1 2003-06-03 ===================
! 2003-05-30 - Gloria Corti
 - src/SingleParticleTaggingMonitor.h, SingleParticleTaggingMonitor.cpp
   . adapt to change in name of Particle2MCLinksAsct and removal of
     obsolete header file
 - src/FlavourMonitorAlgorithm.h, FlavourMonitorAlgorithm.cpp
   . adapt to change in name of Particle2MCLinksAsct and removal of
     obsolete header file

!==================== FlavourTagging v4r4 2003-04-28 =====================
! 2003-04-28 - Gloria Corti
 - cmt/requiremets
   . use DaVinciTools v8r* and DaVinciMCTools v5r*
   . remove explicit use of DaVinciAssociators and TrAssociators (via
     DaVinciMCTools)
   . increase version numver to v4r4

!==================== FlavourTagging v4r3 2003-04-25 =====================
! 2003-04-10 - Olivier Dormond
 - Added a combined particle maker until one is available globally.
 - The FlavourTaggingAlgorithm now reports the statistical errors at the end
   of the job.
 - Added a tool to implement the same-side kaon tagging.
 - Added a simple algorithm to summarise all the generated tags for a B in
   one line.
 - Cleanup the options files.

!==================== FlavourTagging v4r2 2003-01-06 =====================
! 2003-01-06 - Florence Ranjard
 - requirements - use LHCb v11r5

! =================== FlavourTagging v4r1 2003-01-06 ======================
! 2002-12-20 - Gloria Corti
 - Remove explicit dependecy of EventKernel in requirements

! 2002-11-20 - Olivier Dormond
 - Restructured the option files (have a look in
   /afs/cern.ch/user/o/odie/public/DaVinciOptionsForTheTagging for a set of
   option files for DaVinci).
 - Added support for multiple-collision in the FlavourMonitorAlgorithm. Stats
   are now splitted by number of collisions.
 - Added check for the L0 trigger in FlavourTaggingAlgorithm.
 - Droped the ntuple from the SingleParticleTaggingTool.
 - Added a SingleParticleTaggingMonitor to study the job of the so-named tool.

! =================== FlavourTagging v4r0 2002-11-13 ======================
! 2002-11-13 - Gloria Corti
 - Use explicitely EventKernel v2r0 because of compilation error
 - Use new major versions of DaVinciTools (v7r*) and DaVinciMCTools (v4r*)

! =================== FlavourTagging v3r0 2002-10-30 ======================
! 2002-10-21 - Gloria Corti
 - Introduce some missing std:: to compile on windows

! 2002-10-19 - Olivier Dormond
 - Fixed a typo which caused the error on the effective efficiency to be wrong.
 - Added three options files to do tagging with only one kind a particle (Kaon,
   muon, electron).

! 2002-09-20 - Olivier Dormond
 - requirement: added DaVinciMCTools v3r* for the monitoring.
 - FlavourTagging.opts: Changed particle maker to Charged and "All".
 -                      Changed measured Z cut to more closely match the VELO.
 -                      Added setting for the FlavourTaggingDebug algorithm.
 - FlavourTaggingAlgorithm: Added a property 'FirstOnly' (default to false)
     which will let the tagging only use the first B in each hypo location.
     The idea is to have a workaround for the strange behaviour of the
     SelectBs2mumu algo which produces n^2 identical Bs where n is the number
     of primary vertices.
 - SingleParticleTaggingTool: Fixed the removing of the B decay products from
     the event by comparing the ProtoParticles. It could be replaced by the
     CheckOverlap tool when commonly available.
 - Added a FlavourTaggingDebug algorithm which dumps the B and the event.

! 2002-09-13 - Gloria Corti
 - Remove use of PhysEvent, update version of use used packages to be
   consistent with DaVinci v6r0 and set version to v3r0

! =================== FlavourTagging v2r0 2002-09-10 ======================
! 2002-09-10 - Olivier Dormond
 - Monitor: Divided the statistics based on how well the B has been
            reconstructed.
 - Tagging: Added a consistency check.
 - SPTT:    Added the event and run number to the ntuple.
 - All:     Small code layout changes.

! 2002-09-06 - Olivier Dormond
 - Made a cleanup of the abort messages.
 - Fixed the handling of the vertices so the impact param cut realy works.

! 2002-09-05 - Olivier Dormond
 - Fixed computation and report of the statistics for tagging and monitoring
 - Added the missing writeRecord so the ntuples are realy filled in!
 - Stripped down the generated name for the ntuple by only using the last
   part of the tool name (the one after the rightmost dot).

! 2002-09-03 - Olivier Dormond
 - The "/Particles" part of the hypothesis locations is now added
   automatically if not present.
 - Added a check to avoid trying to tag particles without a bottom quark.

! 2002-09-03 - Olivier Dormond
 - Swapped the way particles and B hypothesis are setup. Now the PhysDesktop
   takes care of the particles and the B are handled seperatly.
 - Support multiple locations for the B.
 - The tools support both Particles and ParticleVector.
 - The tools can produce an ntuple for optimization.
 - The tools can save a FlavourTag for the monitoring only.
 - Added a FlavourMonitorAlgorithm to check the FlavourTag against the truth.

! 2002-07-18 - Gloria Corti
 - Increase version number to v2r0 and use DaVinciTools v5r*

! >>>>>>>>>>>>>>>>>>>>>>>>>>> FlavourTagging v1r0 <<<<<<<<<<<<<<<<<<<<<<<<<<<

! 2002-05-22 - Gloria Corti
 - New package provided by Olivier Dormond

