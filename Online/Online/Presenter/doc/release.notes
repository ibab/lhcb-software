!-----------------------------------------------------------------------------
! Package     : Online/Presenter
! Responsible : Peter Somogyi
! Purpose     : GUI to allow the visualization of all data quality histograms
!-----------------------------------------------------------------------------

! 2010-08-19 - G.Graziani
 - declare trend histograms via new OnlineHistDB::declareTrendingHistogram method

! 2010-08-16 - Patrick Robbe
 - src/Archive.cpp: fix use of PresenterInformation class for history trend
   plots

! 2010-08-13 - Patrick Robbe
 - src/presenter.cpp: add command line option ("saveset-file") to allow opening
   a file in the presenter at startup, and command line "startup-page" to allow
   opening a given page in the presenter at startup.

!============ Presenter v2r0 2010-08-13 =============
! 2010-08-13 - Patrick Robbe
 - src/TrendingHistogram.cpp: make it working for history mode also

! 2010-08-12 - Patrick Robbe
 - src/PresenterInformation.h/.cpp: add new class to hold presenter information
   in order to avoid circular dependencies with PresenterMainFrame
 - src/PresenterMainFrame.h/.cpp: use the PresenterInformation class
 - src/ParallelWait, DbRootHist, Archive: use the PresenterInformation class
 - src/DbRootHist.cpp: fix problem that the selected histogram is not the one
   displayed when clicking on inspect button (savannah bug #71152)

! 2010-08-08 - Patrick Robbe
 - src/TrendingHistogram.h,.cpp: add new class to contain trending
   histograms (interfaced to TrendingTool)
 - src/CreateTrendingHistogramDialog.h,.cpp: new GUI class to create
   trending histograms in the HistDB 

! 2010-08-03 - Patrick Robbe
 - cmt/requirements: use Trending package, needs also to use CLHEP in order
   to be able to load the Gaudi ToolSvc from the presenter.
 - src/DbRootHist.cpp: set log scale also if histo is empty but the minimum 
   and the maximum of the histogram have been set to values different from 0
 - src/presenter.cpp: change "startup-histograms" flag from -D to -H to prevent
   clash with already existing option

! 2010-07-31 G. Graziani
 - modifications to HistogramIdentifier to properly handle DIM services from EFF and MF
 - implement support for reference display options
 - support spread option for online profile histograms
 - fix labels in trend history mode
 - fix thread safety issue with virtual histograms using reference (i.e. DivideByReference)

!============ Presenter v1r7 2010-08-03 =============
! 2010-06-29 - Patrick Robbe
 - src/DbRootHist.cpp: remove stat box by default

! 2010-06-22 - Patrick Robbe
 - src/DbRootHist.cpp: protect against non existing fit function name

!============ Presenter v1r6 2010-06-13 =============
! 2010-06-10 G. Graziani
 requiring OnlineHistDB v7 and OMAlib v3
 - improved alarm display (new AlarmDisplay class):
   * sort alarms by system, keeping old alarms in archive folder
   * more detailed alarm messages
   * automatic refreshing of alarm lists when needed
 - support for more display options from HistDB:
   * remove title window or change displayed title
   * stat transparency
   * markersize from int to float
 - support virtual histograms needing source reference
 - cleanup command line options

! 2010-06-03 - Patrick Robbe
 - src/DbRootHist.h/.cpp: move rootHistogram and hostingPad to private 
   members and use accessors to deal with it.
 - src/Archive.cpp, src/DatabasePagePathDialog.cpp, src/HistogramIdentifier.h,
   src/ParallelWait.cpp, src/PresenterMainFrame.cpp, src/ReferencePicker.cpp:
   adapt to the above modification.

!============ Presenter v1r5 2010-06-01 =============
! 2010-06-01 - Patrick Robbe
 - src/PresenterMainFrame.cpp: fix the delete histogram button
 - src/DbRootHist.h: add a function to access the name of the root
   histogram as string directly

! 2010-05-26 - Patrick Robbe
 - src/presenter.h: accept Brunel.root as offline ROOT file
 - src/PresenterMainFrame.cpp: also reads TH1F and TH2F from offline files
 - src/DbRootHist.cpp: also display ellipses from overdrawn pattern

! 2010-05-19 - Patrick Robbe
 - src/DbHistRoot.cpp: retransform double into float 
 - src/PageDescriptionTestView.cpp: fix problem with http links when they
   are outside the visible part
 - src/PresenterMainFrame.cpp: make the page comments text field resizable

!============ Presenter v1r4 2010-05-19 =============
! 2010-05-17 - Patrick Robbe
 - src/PresenterMainFrame.cpp: right-click on histogram to open description
   on web page

! 2010-05-17 - Patrick Robbe
 - src/PresenterMainFrame.cpp: re-activate possibility to access linked
   page double-clicking on histograms.

! 2010-05-16 - Patrick Robbe
 - cmt/requirements: add windows compilation flags to remove compilation
   warnings.
 - various fixes for Windows compilation

!============ Presenter v1r3 2010-05-15 =============
! 2010-05-15 - Patrick Robbe
 - cmt/requirements: add -isystem statement for boost includes in order to get
   rid of the boost libraries warning
 - RunDB.h/.cpp: interface to run db interface (via web server)
 - IntervalPicker.h/.cpp: make the interval chooser for history a modal window
 - PresenterMainFrame.cpp: add possibility to navigate history by runs

! 2010-05-11 - G.Graziani
 - only use end of run savesets for EFF histograms (not reset during run) in history mode

! 2010-05-05 - Patrick Robbe
 - src/PageDescriptionTextView.cpp: fix for Exceed problem with "FreeColor" 
   call from PageDescriptionTextView

! 2010-04-29 - Patrick Robbe
 - cmt/requirements: add dependancy on GuiHtlm (ROOT)
 - PageDecriptionTextView.h/.cpp: now inherits from THtml to show text in 
   nicer format. Also add possibility to open "firefox" on links in the 
   decription text.
 - PresenterMainFrame.h/.cpp: display first the description text of the page

!============ Presenter v1r1 2010-04-26 =============
! 2010-04-25 - Patrick Robbe
 - ProblemDB.cpp/.h: retrieve problems per subsystem (add an argument to the
   function, if argument is "", returns all problems)
 - KnownProblemList.h/.cpp: retrieve problems per subsystem
 - PageDescriptionTextView.h/.cpp: new class to display page comments on presenter
   (inherit most of methods from TGTextView) to allow to display known problems
   on "Shifter" pages on top of the comment from the hist db
 - PresenterMainFrame.cpp and requirements: use the PageDescriptionTextView class

! 2010-04-22 - Patrick Robbe
 - ProblemDB.cpp/.h: add getListOfOpenedProblems function to retrieve from 
   Problems database the list of current problems
 - KnownProblemList.h/.cpp: new object to vizualize list of problems in the
   Problem database (add in cmt/requirements)
 - presenter.cpp: add "hide-problem-list" option which turns off/on display
   of list of know problems at start-up of presentetr
 - PresenterMainFrame.cpp: add problem list pannel

! 2010-04-20 - Giacomo Graziani
 - small fix for labels in history trend mode 
 - call OMAlib destructor before root garbage collector

! 2010-04-13 - Patrick Robbe
 - Archive.h/.cpp: move header files to cpp file
 - DbRootHist, ParallelWait: add extra protections for multi thread
 - PresenterMainFrame.cpp: add namespace, and allow refresh of histograms
   not in the db.

!============ Presenter v1r0 2010-03-29 =============
! 2010-03-29 - Olivier Callot
 - Made the stat box transparent. Draw it only once -> smaller if single line
   Use the stat window size options in the database if needed.
 - When using the default stat option '1', it is replaced by '1110', i.e. 
   remove the name of the histo

! 2010-03-24 - Giacomo Graziani
 - fix long-standing problem on first load of some pages in online mode (improved dim service lookup)
 - implement history by run number, using run-aggregated savesets. Trend plots by run are also supported

! 2010-03-23 - Olivier Callot
 - Fix a bug in ShiftDB to get the shift start time.
 - New file ProblemDB to store entries in the Problem Database. 
 - Upgraded the ElogDialog to retrieve the information for the Problem database
 - popup window to confirm th eproper posting in the logbook (and problem database)
 - PROBLEM: The system name for the problem database (and Elog) is extracted from
   the page name. If this is not one known system, it fails. Informed CALO people
   that they shoudl use ECAL/HCAL/PRS/SPD and rebuild their pages accordingly.
 - Page comment window can be masked. I want it to be resizeable, but didn't manage

! 2010-03-18 - Patrick Robbe
 - ShiftDB.cpp: retrieve names of people on shift calling scripts via
   the shiftdb web interface, instead of direct OCCI calles
 - requirements: remove extra OCCI dependance

! 2010-03-15 - Patrick Robbe
 - ElogDialog.cpp: retrieve text of list box via "GetSelectedEntry" function

! 2010-03-15 - Olivier Callot
 - Increased the size of the page comment window. Attempt to make it resizeable failed...
 - Integrated differently the retrieval of the Data Manager name: Only in LHCb partition so
   moved to PresenterMainFrame.cpp
 - Changed long lines to avoid messages when saving files using LHCb emacs
 - Better messages when the histogram is not accessible in the log file

! 2010-03-10 - Patrick Robbe
 - Add interface to ShiftDB to be able to retrieve the name of
   the data manager on shift: ShiftDB.cpp/ShiftDB.h
 - ElogDialog.cpp: retrieve the name of the data manager on shift

! 2010-02-09 - Olivier Callot
 - Add an optional Subject to Elog, for SD logbooks
 - Minor cleanup in the related code.

! 2010-02-01 - Olivier Callot
 - Make the ELOG button functional. You need to specify the Elog server host in the config file
   under entry 'logbook-settings'. When pressing the button, a windows pops up to specify
   the logbook name, user name, system and message text. The current displayed page is attached
   to the logbook entry.

! 2010-01-27 - Olivier Callot
 - Display the name of the page in the top status bar, aslo for alarms.
 - Prev/Next page navigate in a group, i.e. a directory of the database,
   or the list of alarms. The list wraps around, i.e. next of last is first.

2010-01-27 G.Graziani
+ fixes for Presenter without HistDB 

!============ Presenter v0r23 2010-01-22 =============
2010-01-22 G.Graziani
+ recover loading of pages with multiple virtual histograms
+ fits are now correctly redone on every refresh, avoid parallel histogram refresh for pages containing fits
  (ROOT fitting not thread-safe)
+ history mode: show sources in statusbar
+ history trend plots: show time on bin labels
+ if saveset on command line, load it at startup (no more need to select "preset file")
+ fix histogram set declaration from savesets, enforce checks on histogram identifier syntax
+ fix crash with virtual histograms with missing sources in savesets
+ re-establish automatic DB connection at startup
+ update source list in requirements

!============ Presenter v0r22 2009-11-13 =============
2009-11-13
+ reshuffle pages in folders via DND in left panel
  note: ROOT DND often crashes when hovering mouse
  while Highlight. (HandleEvent in GUI is "too
  complicated and unmaintainable"[sic])
+ create folders
+ rename pages
+ new saveset structure

!============ Presenter v0r21 2009-09-14 =============
2009-09-14
+ create trendplots from MonRates in batch
+ added trendplots in GUI, Database (please don't load
  pages from DB in Editor mode just yet)
+ added TCK awareness when trendplot is present on page

!============ Presenter v0r20 2009-06-16 =============
2009-06-16
+ create entry to logbook
+ test // loading of histograms
+ new config file, DB login mechanism has changed!
  automatic login attempt using first DB entries
+ View->Hide Alarm list, also from cfg file
o hopefully fixed history mode file browser issues

!============ Presenter v0r19 2009-06-01 =============
2009-06-01
+ print/save page as eps, pdf, png etc.
+ back/forth navigation of hyperlinks/pages

!============ Presenter v0r17 2009-04-14 =============
! 2009-04-14
+ initial Brunel and DaVinci file support
0 feedback from fest2
+ Giacomo's patch: new DB entries (e.g. PadMargins)
    fix ref. normalization
+ double click on histos link to another page
+ msg list handling: display histos in alarm

!============ Presenter v0r16 2009-03-05 =============
! 2009-03-05
0 fix histo zoom

!============ Presenter v0r15 2009-02-01 =============
! 2009-02-01
0 drop MonH1F and MonH2F support
+ custom artwork overlay in standard plot mode
+ fixed histogram selection
+ preliminary offline editor mode using file as
  histogram svc
+ partition support for EFF
+ render 2D histos with doubles as images in fast mode
+ establish partitions using fs entries at init,
  instead of DIM browsing (faster startup)

!============ Presenter v0r14 2008-11-24 =============
! 2008-11-24
+ page comments and histogram descriptions
+ ignore histos from dead tasks on a page
+ trend plot of savesets

!============ Presenter v0r13 2008-11-04 =============
! 2008-11-04
+ save histogram description to DB
+ new saveset & ref. paths
+ history mode partition,
+ red refs, statopts global setting
! disabling of virtual analysis histo references
+ initial EFF Adder DIM address support 
+ DIM cached in DB, seeking only when broken
+ Giacomo's "trend" aggregation

!============ Presenter v0r12 2008-09-26 =============
! 2008-09-16
+ fix MonObject Clear&Restore
+ support missing partition names from UTGID
+ attempt to remove dead-body feature of ROOT
! 2008-09-26
+ from Giacomo: algorithm name for savesets, 
    ref. management moved to OMAlib

!============ Presenter v0r11 2008-09-01 =============
! 2008-09-01
+ MonObject support

!============ Presenter v0r10 2008-06-17 =============
! 2008-06-17
+ Quick partition selector with autodiscovery
+ Dynamic DIM service address for histograms
+ Navigation in History mode through time

!============ Presenter v0r9 2008-06-05 =============
! 2008-06-05
+ resume refresh when switching pages
+ filter DIM services remotely (~faster DIM tree refresh)

!============ Presenter v0r9 2008-05-23 =============
! 2008-05-23
o use ROOT "thermic" colour palette instead of custom
o default error bars when rendering profile histograms
+ history mode: can specify a root file at startup;
  there is also a rudmientary file picker for savesets.
  Pressing Cancel in TGFileDialog file picker invokes
  a crash as of now: please press "Ok" instead.
+ faster startup: reading DIM services to fill trees is
  done only in Editor mode
o reverted to "power" editor mode (can clear histos
  again)

!============ Presenter v0r8 2008-04-19 =============
! 2008-04-19
o recover from profile histogram rendering regression

!============ Presenter v0r7 2008-03-19 =============
! 2008-03-19
o Root-style multiple selection on trees
+ references can be saved in editor mode and be selected
  through the GUI (selection is one-by-one)
+ overlay display is steered by a reference button
  and the HistoDB entry 
- navigation panel in history mode does not work
o savesets and references need to be parametrized via
  command-line or config file (defaults in the pit
  don't work yet)

!============ Presenter v0r6 2008-01-30 =============
! 2008-01-30
 o based on Root 5.18.00 and Boost 1.34.1
 + modes of operation switchable between Online,
   History and Page Editor
 + new configuration: command-line and via file
 icon theme: GNOME Art "Gnome 2.18 icon theme By aneglus"

!============ Presenter v0r5 2007-11-29 =============
! 2007-11-29
 + updated to OnlineHistDB v4
 + new GUI layout
 + minor bugfixes, improvements
 + initial reference histogram support
   (no setting through GUI)

!============ Presenter v0r4 2007-10-29 =============
! 2007-10-29
 - New test package. 

